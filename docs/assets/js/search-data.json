[{"doc":"This page has not yet sprouted","title":"This page has not yet sprouted","hpath":"403","content":"[Dendron](https://dendron.so/) (the tool used to generate this site) lets authors selective publish content. You will see this page whenever you click on a link to an unpublished page\n\n![](https://foundation-prod-assetspublic53c57cce-8cpvgjldwysl.s3-us-west-2.amazonaws.com/assets/images/not-sprouted.png)","url":"https://angelarwang.com/dendron-notes/notes\\403.html","relUrl":"notes\\403.html"},{"doc":"Root","title":"Root","hpath":"root","content":"\n# My notes \r\n\r\nHello there! \r\nThis is where I keep and share my notes on books, tech, travel, and other hobbies :)\r\n","url":"https://angelarwang.com/dendron-notes","relUrl":"/"},{"doc":"Topics","title":"Topics","hpath":"topics","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\bee70da8-e282-4d98-9709-1bad45e8a734.html","relUrl":"notes\\bee70da8-e282-4d98-9709-1bad45e8a734.html"},{"doc":"Testing","title":"Testing","hpath":"topics.testing","content":"\n\r\nStress testing: \r\n- [字节跳动全链路压测(Rhino)的实践](https://mp.weixin.qq.com/s/vofrpFGvnptj3MNAv1hQ-w)\r\n    ![](/assets/images/2020-11-11-15-24-16.png)\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d12b00d4-6ba1-4505-8472-b729e901ba48.html","relUrl":"notes\\d12b00d4-6ba1-4505-8472-b729e901ba48.html"},{"doc":"Tech Biz","title":"Tech Biz","hpath":"topics.tech-biz","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\c2a379bd-18b2-430a-966f-de8e85ef3997.html","relUrl":"notes\\c2a379bd-18b2-430a-966f-de8e85ef3997.html"},{"doc":"Social Networks","title":"Social Networks","hpath":"topics.tech-biz.social-networks","content":"\n\r\n\r\n[Social Networking 2.0](https://stratechery.com/2020/social-networking-2-0/) from Stratechery\r\n\r\n- 12/26/2020\r\n-  v1 digital products simply copy what already exists offline. V2 makes it better. \r\n    - example: peronsalized news feed + advertising vs newspapers \r\n- Social networks: \r\n    - \r\n    > Twitter’s incompetence didn’t simply make Facebook’s advertising business look more dominant than it should have; it led all of us — including the FTC — to miss the point that friends and family was Social Networking 1.0: something imported from the analog world that, as time goes on, will be viewed as inferior to the far richer universe that is Social Networking 2.0.\r\n    \r\n    - real life: conflict b/w your whole self & partial interest overlap with other friends/family\r\n    \r\n    > The fact that **I am not my whole self in any of these groups is a feature, not a bug**, and one that is uniquely made possible by digital.\r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\fe49f023-1eec-4fdf-aa89-ab8f8b8e85d9.html","relUrl":"notes\\fe49f023-1eec-4fdf-aa89-ab8f8b8e85d9.html"},{"doc":"Tech Adoption","title":"Tech Adoption","hpath":"topics.tech-adoption","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\5d647f04-cc3d-45fd-8fcc-6f4f67671952.html","relUrl":"notes\\5d647f04-cc3d-45fd-8fcc-6f4f67671952.html"},{"doc":"Building tech standards at AWS","title":"Building tech standards at AWS","hpath":"topics.tech-adoption.building-tech-standards-at-aws","content":"\n\r\n## \"Building technology standards at Amazon scale\" by Marc Brooker\r\n\r\n- session : https://virtual.awsevents.com/media/1_q557au4h \r\n- notes from Yancui: https://threadreaderapp.com/thread/1334467949369896961.html \r\n\r\n- case study :\r\n    ![](/assets/images/2020-12-07-11-28-28.png)\r\n- tenet: \r\n    - Think long term:  **cost of operations and maintenance outweigh the initial cost of development.**\r\n        ![](/assets/images/2020-12-07-11-30-49.png)\r\n- standards: use sparingly. limits tring new things\r\n- focus on incentives and ownership\r\n    \r\n[[#rust|tag.rust]]\r\n","url":"https://angelarwang.com/dendron-notes/notes\\fbfe00ff-109f-4d84-8e62-22298363c305.html","relUrl":"notes\\fbfe00ff-109f-4d84-8e62-22298363c305.html"},{"doc":"Machine Learning","title":"Machine Learning","hpath":"topics.ml","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\056961d3-aba0-4fc6-ba6f-598dbc38294c.html","relUrl":"notes\\056961d3-aba0-4fc6-ba6f-598dbc38294c.html"},{"doc":"Survival Analysis","title":"Survival Analysis","hpath":"topics.ml.survival-analysis","content":"\n# Survival analysis\r\nSurvival analysis is a branch of **statistics** for analyzing the expected duration of time until one or more events happen, such as death in biological organisms and failure in mechanical systems. - [wikipedia](https://en.wikipedia.org/wiki/Survival_analysis)\r\n\r\nHistorically, originally developed and used by acturaries and medical researchers to estimate population lifetimes. \r\n\r\n- [Video: Censoring](https://www.youtube.com/watch?v=vX3l36ptrTU)\r\n    ![](/assets/images/2020-11-11-15-12-53.png)\r\n    - **Assume**: censoring is non-informative - being censored or not is not related to the probablity of event happening\r\n\r\n- [Video: Survival Function, Hazard, & Hazard Ratio](https://www.youtube.com/watch?v=MdmWdIV5k-I)\r\n    - **Survival function**: S(t) = P(T>t) = prob. of survival beyond time t\r\n    - **Hazard**: HAZ = P(T< t + dt | T >t)\r\n             = prob of dying in next few seconds, given alive now\r\n    - **Hazard ratio** (HR)  , prob of dying in next few seconds given exposure vs. not \r\n    \r\n        \\\\(  HR = {HAZ, x=1 \\over HAZ, x=0} \\\\)\r\n    \r\n- [Video: comparing 3 ](https://www.youtube.com/watch?v=K7bmmbD7KIg)\r\n\r\n    model | Kaplan-Meier | Exponential | Cox-PH model\r\n    ------|--------------|------------|-------------\r\n    type | non-parametric | parametric | semi-parametric\r\n    prob | Simple <br>  can est S(t) | can est S(t) and HR | hazard can fluctuate with time <br> can est HR \r\n    con |  No functional form <br> cannot est HR * | not always realistic <br> assume constant HAZ <br> Weibull model allows haz to proprotially ↗ or ↘\twith time) | cannot est S(t)\r\n\r\n- [Video: part 4- Kaplan-Meier model](https://www.youtube.com/watch?v=VJPPeUpyC6c)\r\n    - Process to compute the survival curve:\r\n        ![](/assets/images/2020-11-11-16-25-29.png)\r\n    - censored data get incorporated for all the prob. calculations before they drop out \r\n    - a tick indicate censored data \r\n    - example graph from [water pipe break paper](https://www.researchgate.net/publication/338223962_Improving_Urban_Water_Security_through_Pipe-Break_Prediction_Models_Machine_Learning_or_Survival_Analysis)\r\n        ![](/assets/images/2020-11-11-16-29-36.png)\r\n          \r\n\r\n- [Video: Exponential Model](https://www.youtube.com/watch?v=T_goHnU8Eu4&list=PLqzoL9-eJTNDdnKvep_YHIwk2AMqHhuJ0&index=6)\r\n  ![](/assets/images/2020-11-13-15-35-26.png)\r\n  ![](/assets/images/2020-11-13-15-36-57.png)\r\n\r\n\r\n- [Video: Exponential vs Weibull vs Cox Proportional Hazards](https://www.youtube.com/watch?v=KDpAtrqS39w&list=PLqzoL9-eJTNDdnKvep_YHIwk2AMqHhuJ0&index=7)\r\n \r\n    - Overall:\r\n        - \\\\( Survival Function = S(t) = P(T>t) = e^{-HAZ*t} \\\\)\r\n        - \\\\( HAZ = e^{ b_{0} + b_{1}x_{1} + b_{2}x_{2} + ... +  b_{k}x_{k}} \\\\)\r\n        - \\\\( \\ln(HAZ) = b_{0} + b_{1}x_{1} + b_{2}x_{2} + ... +  b_{k}x_{k} \\\\)\r\n        - \\\\( b_0 \\\\) is \\\\( \\ln(HAZ) \\\\) for reference (at T=0)\r\n    - **Exponential**\r\n        - \\\\( b_0 \\\\) is constant -> constant hazard \r\n    - **Weibull**\r\n        - \\\\( b_0 \\\\) is proprotional to time:  \\\\( \\ln(\\alpha) \\ln(t) + b_0 \\\\) =>  \\\\( b_0 \\\\) \r\n        -  \\\\(\\alpha = 1 \\\\) - constant hazard\r\n        -  \\\\(\\alpha > 1 \\\\) -  hazard increase with time\r\n        -  \\\\(\\alpha < 1 \\\\) - hazard decrease with time\r\n    - **Cox Proportional Hazards**\r\n        - \\\\( b_0 \\\\) is a function of time \r\n        - the algo can estimate \\\\( b_1, b_2, .... \\\\) without having to specify the funtion for \\\\( b_0 \\\\)\r\n        - good for analyzing hazard ratios: **how effective** is treatment A vs B, exposure or non-exposure\r\n        - **can't do predictive models on survival**\r\n        \r\n ### Lifelines: Survival analysis in python\r\n\r\n - [Talk from the author](https://www.youtube.com/watch?v=XQfxndJH4UA)\r\n - Docs: https://lifelines.readthedocs.io/en/latest/index.html\r\n \r\n\r\n\r\n\r\n---- \r\n[Coursera: AI for Medical Prognosis](https://www.coursera.org/learn/ai-for-medical-prognosis/home/welcome)\r\n \r\n- **prognosis** vs diagnosis: \r\n    - prognosis = predicting the likely or expected development of a disease\r\n- examples in medical practice:\r\n    - CHA2DS2-VASc score for atrial fibrillation\r\n    - MELD score for end-stage liver desease: \r\n        - \\\\( ln \\\\) terms \r\n        - contain an **intercept** = if all other values is 0, expected risk score \r\n    - ASCVD (Atherosclerotic Cardiovascular Disease) Risk Calculator\r\n        - **interaction terms** - capture dependence btw variables \r\n            - e.g. blood pressure has less effect of risk when patient is older \r\n\r\n## Evaluating risk scores\r\n- Concordant Pairs: \r\n    - ![](/assets/images/2020-11-23-15-38-09.png)\r\n    - Concordant = patient with worse outcome has higher risk score\r\n    - if outcome ties => exclude\r\n    - if outcome different => permissible pair => inlcude   \r\n    - rule:\r\n        - +1 for permissible pair that is Concordant\r\n        - +0.5 for permissible pair with risk tie (outcome different, but same risk score)\r\n- C-index \r\n\r\n    \\\\( C-index = { Count_{concordant} + 0.5 Count_{ties} \\over Count_{permissible}} \\\\)\r\n- Applying c-index on censored data - **Harrel's C-Index**\r\n    - patient A & B both not censored => always permissible, even if A & B has same time-to-event\r\n    - patient A & B both censored => not permissible\r\n    - patient A censored, B not censored:\r\n        - if A < B - not permissible\r\n        - if A >= B - permissible\r\n    ![](/assets/images/2020-11-23-16-40-58.png)\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d4dd9201-c58d-4f4d-aa38-498c8c6e6267.html","relUrl":"notes\\d4dd9201-c58d-4f4d-aa38-498c8c6e6267.html"},{"doc":"ML and technical debt","title":"ML and technical debt","hpath":"topics.ml.ml-and-tech-debt","content":"\n\r\n## Machine Learning: The High Interest Credit Card of Technical Debt\r\n\r\n* link to paper: https://research.google/pubs/pub43146/\r\n\r\n* Complex Models Erode Boundaries\r\n    - Entanglement\r\n        - Generally not possible to make isolated changes - Changing Anything Changes Everything \r\n        - Applies to features, signals, parameter settings, etc\r\n        - Somewhat innate to ML \r\n    - Hidden feedback loop \r\n        - ML system’s predictions end up influencing its own training data\r\n        - May happen in surprising ways, such as two systems are dependencies of each other \r\n        - Can result in gradual changes not immediately visible, hard to detect and debug \r\n    - Undeclared consumers \r\n        - Changes to model impact undeclared downstream app \r\n        - Also potential to create hidden feedback loops \r\n* Dependency debt\r\n    - Data dependency cost more than code dependencies \r\n        - Data dependency is harder to track than code dependencies \r\n        - Unstable dependency\r\n        - Legacy features\r\n        - Bundle features\r\n        - episilon Features – small improvement in accuracy with huge complexity overhead\r\n        - Correction cascade – tendency to use another model and learn a calibration layer\r\n    \r\n* System level spaghetti\r\n    - Glue code - most of the code is not the model itself. \r\n    - Pipeline jungles\r\n    - Dead Experimental Codepaths \r\n    - Configuration Debt \r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\6011ad5f-c0b5-43f3-a3a0-cd6a09611c28.html","relUrl":"notes\\6011ad5f-c0b5-43f3-a3a0-cd6a09611c28.html"},{"doc":"Inference  accelerator","title":"Inference  accelerator","hpath":"topics.ml.inference-accelerator","content":"\n\r\n## GPUs vs AWS Inferentia vs Amazon EIs \r\n\r\n[A complete guide to AI accelerators for deep learning inference — GPUs, AWS Inferentia and Amazon Elastic Inference](https://towardsdatascience.com/a-complete-guide-to-ai-accelerators-for-deep-learning-inference-gpus-aws-inferentia-and-amazon-7a5d6804ef1c)\r\n\r\nDeep learning inference acceleration landscape\r\n- CPUs acquired support for advanced vector extensions (AVX-512)\r\n- GPUs acquired new capabilities such as support for reduced precision arithmetic (FP16 and INT8) further accelerating inference\r\n- AWS Inferentia, a custom-designed ASIC \r\n\r\n\r\n### Considerations\r\n\r\n- Model type and programmability: model size, custom operators, supported frameworks\r\n    - AWS Inferentia - fixed set of supported operations exposed via AWS Neuron SDK compiler \r\n    - CPU - fully programmable\r\n    - GPU - in between \r\n    - if have custom code written in high level languages, fall back to CPU:\r\n        ![](/assets/images/2020-11-20-11-31-03.png)\r\n        - NVIDIA GPUs: option to **reimplement custom code using CUDA**. \r\n            ![](/assets/images/2020-11-20-11-52-23.png)\r\n        - this is hard to do w ASIC \r\n- Target throughput, latency and cost: \r\n    - **GPUs** are throughput processors \r\n        - If latency is not critical, GPU utilization can be kept high and cost low - great for batch processing & offline inference\r\n        - if you are unable to keep your GPU utilization at its maximum at all times, due to e.g. sporadic inference request, cost / inference request goes up \r\n            - better to use **Amazon Elastic Inference** which lets you access just enough GPU acceleration for lower cost.\r\n\r\n    - CPUs are not parallel, but may be better for realtime inference of smaller models as long as latency is acceptable\r\n    - Inferentia’s performance and lower cost could be most cost effective and performant option if model is fully supported \r\n- Compiler and runtime toolchain and ease of use\r\n    - GPU:\r\n        - deep learning framework is good but not optimized\r\n        - use a dedicated inference compiler such as NVIDIA TensorRT for up to 10x speedup \r\n            - Quantization: reduce precision - from FP32 -> FR16 or INT8\r\n            - Graph fusion: fusing multiple layers/ops into a single function call\r\n\r\n### AWS Inferentia\r\n- precisions:\r\n    - automatically cast your FP32 model to BF16 \r\n    - or can provide model in FP16 \r\n- increase performance by:\r\n    - batching: reducing cost of loading weights for each layer from external memory for each input\r\n    - pipelining: load weights of different subgraphs on different NeuronCores\r\n    - both require setting options during compilation \r\n- Using all NeuronCores on your Inf1 instances: \r\n    - smallest instance type: inf1.xlarge automatically perform data parallel execution on all 4 NeuronCores (=replicating your model 4 times and loading it into each NeuronCore and running 4 Python threads to feed input to data to each core)\r\n    - larger instance: must spawn multiple threads and use python threadpools \r\n- divide NeuronCores to run different models\r\n\r\n### Amazon Elastic Inference\r\nAttached through the network using an AWS PrivateLink\r\n\r\nWhy choose Amazon EI over dedicated GPU instances?\r\n- if don’t have sufficient demand or multiple models to serve and share the GPU to keep up utilization, can attach \"just enough\" GPU acceleration to a CPU instance\r\n- The cost of the CPU instance + EI accelerator would still be cheaper than a dedicated GPU instance\r\n- EI adds some latency compared to GPU instance, but can be faster than CPU only \r\n- need to use an EI enabled framework such as TensorFlow, PyTorch or Apache MXNet\r\n\r\n\r\n## [Choosing the right GPU for deep learning on AWS](https://towardsdatascience.com/choosing-the-right-gpu-for-deep-learning-on-aws-d69c157d8c86)\r\n\r\n- G4 instance: NVIDIA T4 GPUs \r\n    - go-to for inference\r\n    - FP64, FP32, FP16, Tensor Cores (mixed-precision), and INT8 precision types\r\n    - 16 GB of GPU memory   \r\n- P3: if need more throughput or need more memory per GPU\r\n","url":"https://angelarwang.com/dendron-notes/notes\\ee5aabfa-c76b-465e-8a60-63a8b391d6b4.html","relUrl":"notes\\ee5aabfa-c76b-465e-8a60-63a8b391d6b4.html"},{"doc":"Algorithmic Fairness","title":"Algorithmic Fairness","hpath":"topics.ml.algorithmic-fairness","content":"\n\r\n### Algorithmic Fairness from a Non-ideal Perspective\r\n- author/speaker: Zack Lipton  \r\n- https://arxiv.org/abs/2001.09773 \r\n\r\n\r\n- important moments:\r\n    - ProPublica machine bias article from 2016 - a galvanizing event prompting interest: https://www.propublica.org/article/machine-bias-risk-assessments-in-criminal-sentencing \r\n    - [Gender Shades](http://proceedings.mlr.press/v81/buolamwini18a.html)- 2018. unbalanced dataset of facial benchmarks \r\n    - biased allocation of healthcare - https://www.theverge.com/2019/10/24/20929337/care-algorithm-study-race-bias-health \r\n-  Philosophy of justice \r\n    - https://plato.stanford.edu/entries/justice/\r\n        - obligation (\"one's due\") in contrast to charity\r\n        - resolve conflicts when interests clash\r\n        - impartiality - two cases relvantly alike should be treated similarly \r\n    - convservative (conserving existing norms) vs ideal (demand reform of norms and practicies) \r\n    - corrective (bilateral, wrong-doer <> wronged ) vs distributive (allocating goods to individuals, mutltilateral with a distributing agent)\r\n    - procedural (procedure) vs substantive (end result)\r\n    - comparative (a position was offered to a less qualified candidate) vs non-comparative (regardless of comparison, e.g. basic human rights)\r\n        - ML disccussion often focus on comparative. should also consider non-comparative\r\n    - scope of justice \r\n    - ideal and non-ideal theorizing (The Imperative of Integration - Elizabeth S. Anderson)\r\n        - ideal:\r\n            - imagine perfectly just world  (Rawls)\r\n            - try to minimzie discrepancy between reality and ideal\r\n            - e.g. been used to argue against affirmative acction - ideal world is color blind \r\n        - non-ideal:\r\n            - understand causual explanation of the problem, determine waht can be done and who to correct it. \r\n        \r\n- economics \r\n    - \"the economics of discrimination\" - Becker \r\n        -  simulation of employer taste-based discrimination\r\n    - Arrow's Rebuttal to Becker 1973 \r\n        - imperfect information as alternative cause \r\n    - \"Statistical theory of racism and sexism\"\r\n        - Efficient candidate screening under multiple tests and implications for fairness\r\n https://arxiv.org/abs/1905.11361\r\n            - concerns noise \r\n            - by adjusting number of interviews. hitting boundary on left, can equalize FP and FN across groups w different noise level \r\n                - but more num of interviews can negatively affect candidates too \r\n        - Will Affirmative-Action Policies Eliminate Negative Stereotypes?\r\n            - Stephen Coate and Glenn C. Loury\r\n            - https://www.brown.edu/Departments/Economics/Faculty/Glenn_Loury/louryhomepage/papers/Coate%20and%20Loury%20(AER%201993).pdf\r\n            - even when groups are equal ex ante, equilibrium outcomes following some internventions can appear to confirm negative sterotypes \r\n\r\n- ML fairness\r\n    - https://www.theatlantic.com/technology/archive/2018/05/machine-learning-is-stuck-on-asking-why/560675/?utm_source=twb \r\n         - \"ML is stuck on ... learning associations \"\r\n         - it learns associations and not causal relations \r\n         - on one hand, curve fitting turned out useful many places\r\n         - but in many problems, curve fitting is not enough\r\n\r\n    - http://approximatelycorrect.com/2016/11/07/the-foundations-of-algorithmic-bias/ \r\n    - taking inspiration from law: \r\n        - title 7 of civil rights law \r\n            - disparate treatment \r\n                - addresses **intentional** discrimination\r\n                    - protected characterstic \r\n                    - also via proxy variables \r\n                    - with exceptions e.g. if goal is to promote diversity\r\n                - what does intention mean in ML context? \r\n            - disparate treament   \r\n                - 3 tests:\r\n                    - plaintiff must demo statistical disparity (4/5 rule)\r\n                    - defendent must show descirions are justified by business necessity \r\n                    - plaintiff must show defendent can achieve goal w alternative practice \r\n                - first one can be done using stats. \r\n                - later 2 of the 3 tests of the above are not well adressed by ML, require causal reasoning \r\n- typical \r\n    - treatment parity\r\n        - output does not depend on sensitive characteristic\r\n            - Model cannot use that feature \r\n    - impact parity \r\n         - outcome independent of group status\r\n            - model can use the feature, but result algo outcome is indenpdent \r\n                ![](/assets/images/2020-12-10-16-11-01.png)\r\n    - representational parity \r\n        - the input map to some representation that you can't infer their demographics \r\n        - entails impact parity\r\n    - equalized odds / opportunity parity \r\n        - equal FN and/or FP rates \r\n- problem \r\n    - the different parities are mutually irreconcilable \r\n    - statisctical parity may not capture legal/philosophical notions \r\n    - lack ingredients to determine just action\r\n        - how did disparities arive\r\n        - impact of the decision\r\n        - responsibilities of the decision maker \r\n- \"impossibility\" theorem: \r\n    - if we start from a **non-ideal world**, no set of action can simultaneously satisfy all the ideal \r\n    - meeting the ideal in some respect may require widening other gaps \r\n    - \"equity\" - peyton young, 1994\r\n        - different definition of equity which all seem reasonable by itself, when together causes non-reconcible conflict \r\n    => must make some choices \r\n- problem applications of attempts for fair algorithm \r\n    - ![](/assets/images/2020-12-10-16-20-04.png)\r\n        - for maximizing impact disparity, treatment disparity is optimal (theortical)\r\n        - if other features sufficiently can encode the sensitive feature, result is indistinguishable from teatment disparity (theortical)\r\n        - if other features partially encode sensitive feature => empirical side effects\r\n            - recorders within group that makes no (not procedurally justifiable)\r\n            - produces potentially bizarre incentives to conform to steortype \r\n\r\n        - example case study of gender study in CS admissions\r\n            - when applied DLP, the decisions were flipped neg to pos, for candidates that based on other traits were more likely to be female and vice versa \r\n                - in effect hurt female candidates who were applying to fields that are more male dominated \r\n         \r\n- interesting research to follow\r\n    - causal approaches to fairness\r\n        - counterfactual fairness (Kusner 2017)\r\n        - causal explanation (bareinboim 2017)\r\n        - sensitive to subjectivity (different interpretations of the cause)\r\n        - outsource the key issue to humans \r\n    - feedback loops - next-step or equilibrium outcomes in a dynamic model \r\n        - Delayed impact of fair ML, Liu et al\r\n        - Social Cost of strategic classification / Disparate effects of Strategic manipulation\r\n        - Runaway Feedback Loops in predictive Policing\r\n        \r\n","url":"https://angelarwang.com/dendron-notes/notes\\c23cc850-fa67-44ac-93df-bab59ef41f46.html","relUrl":"notes\\c23cc850-fa67-44ac-93df-bab59ef41f46.html"},{"doc":"Distributed Systems","title":"Distributed Systems","hpath":"topics.distributed-systems","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\27ffe8ae-20ff-4850-a31e-aafff2c30b3f.html","relUrl":"notes\\27ffe8ae-20ff-4850-a31e-aafff2c30b3f.html"},{"doc":"Scheduler","title":"Scheduler","hpath":"topics.distributed-systems.scheduler","content":"\n\r\n### [Blog]- An Approach to Designing a Distributed, Fault-Tolerant, Horizontally Scalable Event Scheduler\r\n- https://medium.com/walmartglobaltech/an-approach-to-designing-distributed-fault-tolerant-horizontally-scalable-event-scheduler-278c9c380637\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d388fa7b-7a1f-4030-8c7d-b92c8e982490.html","relUrl":"notes\\d388fa7b-7a1f-4030-8c7d-b92c8e982490.html"},{"doc":"Orchestration","title":"Orchestration","hpath":"topics.distributed-systems.orchestration","content":"\n\r\nDifferent Orchestration systems\r\n\r\n| Category | Variations | Tradeoffs |\r\n| --- | ----------- |  -- |\r\n| Activity trigger | Push or Pull | cheap/fast (good for fast and lightweight steps) vs. throughput decoupled | \r\n| Persistence level | Only as needed or after each step| cheap/fast vs. consistent \r\n| Process Execution | Sync or Async |\r\n| Activity execution | Remote or Local |\r\n| Process Trigger | Request driven or Event driven |\r\n","url":"https://angelarwang.com/dendron-notes/notes\\5a064f50-f1fe-4fa0-8234-bc626fea65a8.html","relUrl":"notes\\5a064f50-f1fe-4fa0-8234-bc626fea65a8.html"},{"doc":"Google BigTable","title":"Google BigTable","hpath":"topics.distributed-systems.bigtable","content":"\n\r\n# Google BigTable\r\n- Bigtable: A Distributed Storage System for Structured Data (https://research.google/pubs/pub27898/)\r\n- hosted on GCP: Cloud Bigtable\r\n- Inspired **Apache Cassandra** (from Facebook)\r\n- **Spanner** is layered on top \r\n\r\n## Logical data model\r\n\r\n![](/assets/images/2020-11-15-16-23-55.png)\r\n\r\n- Key (row:string, column:string, time:int64) → Value: string\r\n- Row: \r\n    - data stored in **lexicographic order by row key**\r\n    - row range = **_tablet_**\r\n    - when storing URLs, use reversed URL as row ID so URLs from the same domain are close to each other: `com.google.maps`  `com.google.images`\r\n- Column Families\r\n    -  Colume key: `family:qualifier`\r\n- Timestamps\r\n    - multiple versions of data \r\n    - garbage-collect rules:\r\n        - \\# of versions to keep\r\n        - discard versions older than x days\r\n    \r\n## API \r\n\r\n- Write - atomic operation on rows - supports single-row transactions \r\n    ```C++\r\n    Table *T = OpenOrDie(\"/bigtable/web/webtable\");\r\n    // Write a new anchor and delete an old anchor\r\n    RowMutation r1(T, \"com.cnn.www\"); \r\n    r1.Set(\"anchor:www.c-span.org\", \"CNN\"); \r\n    r1.Delete(\"anchor:www.abc.com\");\r\n    Operation op;\r\n    Apply(&op, &r1);\r\n    ```\r\n- Read - Clients can iterate over multiple column families for a row \r\n    ```C++\r\n    Scanner scanner(T);\r\n    ScanStream *stream;\r\n    stream = scanner.FetchColumnFamily(\"anchor\"); \r\n    stream->SetReturnAllVersions(); \r\n    scanner.Lookup(\"com.cnn.www\");\r\n    for (; !stream->Done(); stream->Next()) {\r\n        printf(\"%s %s %lld %s\\n\", scanner.RowName(), stream->ColumnName(),stream->MicroTimestamp(), stream->Value());\r\n\r\n    ```\r\n\r\n## Implementation\r\n\r\n- master:\r\n    - assign tablets to tablet servers\r\n    - detecting the addition and expiration of tablet servers\r\n    - balancing tablet-server load\r\n    - GFS garbage collection\r\n- tablet servers:\r\n    - 100-200 MB each by default\r\n        ![](/assets/images/2020-11-15-16-39-50.png)\r\n    - tablet server holds an exclusive lock in Chubby \r\n    - master detect by asking each tablet server for lock status \r\n        - if fails, master attempts to aquire the server lock. if success, delete the server file, and move assgiment to other tablets \r\n        - master failure does not change assigment \r\n    - master at startup:\r\n        - takes a master lock \r\n        - scan server directory in Chubby\r\n        - contact tablet to learn current assigments \r\n        - reads METADATA to find tablets \r\n        - assign un-assigned tablets \r\n        \r\n\r\n\r\n![](/assets/images/2020-11-15-16-10-05.png) \r\n- image from [Youtube: 深入浅出BigTable\r\n](https://www.youtube.com/watch?v=r1bh90_8dsg)\r\n","url":"https://angelarwang.com/dendron-notes/notes\\70076aa3-4564-4d29-8559-c766fa201698.html","relUrl":"notes\\70076aa3-4564-4d29-8559-c766fa201698.html"},{"doc":"Async job scheduling","title":"Async job scheduling","hpath":"topics.distributed-systems.async","content":"\n\r\n### [Blog] Asynchronous computing @Facebook\r\n- https://engineering.fb.com/2020/08/17/production-engineering/async/\r\n- Problem with simple priority queues: \r\n    - large use cases dominate\r\n    - bad jobs stuck \r\n    - uneven utilization between peaks & valleys \r\n- Building to scale\r\n    - introduce **delay tolerance**\r\n    - Capacity optimization: \r\n        - classifying use cases:\r\n            - daily traffic: predictable\r\n            - major events: semi-predictable\r\n            - Incident response: short and spikey, unpredictable\r\n        - Time shifting: \r\n            - Predictive - which data may need, precomputes and cache\r\n            - Deferred compute\r\n            ![](/assets/images/2020-11-15-15-53-52.png)\r\n        - batching: \r\n            - reduce # of requests to other components \r\n            - potential high cache reuse and code warmup\r\n    -  Capacity policy: quota and rate limiting\r\n        - CPU instruction utilization and memory limit - when exceeded, throttle and send alert\r\n        - rate limit on intake\r\n    \r\n","url":"https://angelarwang.com/dendron-notes/notes\\7ec6a7fa-7000-45e0-bec0-e3aa2e3493c5.html","relUrl":"notes\\7ec6a7fa-7000-45e0-bec0-e3aa2e3493c5.html"},{"doc":"Cloud","title":"Cloud","hpath":"topics.cloud","content":"\n\r\n- [Using HPC and ML on AWS to understand climate change](https://www.allthingsdistributed.com/2020/11/science-of-climate-change.html) \r\n    - Maxar Technologies - weather prediction models \r\n        - c5n.18xlarge + EFA networking adapter \r\n        - 14TB FSx for Lustre with progressive file layout (PFL) across the 12 object storage targets (OSTs).\r\n            ![](/assets/images/2020-11-20-11-21-07.png)\r\n    - cloud efficiencies:\r\n        - A typical large-scale cloud provider achieves ~65 % server utilization rates versus 15% on-premises (source - [Data Center Efficiency Assessment](https://www.nrdc.org/sites/default/files/data-center-efficiency-assessment-IP.pdf)). which means when companies move to the cloud  they typically provision fewer than ¼ of the servers than they would on-premises.\r\n        - A typical on-premises data center is 29% less efficient in their use of power compared to a typical large-scale cloud provider \r\n","url":"https://angelarwang.com/dendron-notes/notes\\48575b62-61b9-4ee8-be31-67c48966a2fe.html","relUrl":"notes\\48575b62-61b9-4ee8-be31-67c48966a2fe.html"},{"doc":"Aws","title":"Aws","hpath":"topics.cloud.aws","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\2b9a1aec-3d9d-4f47-836e-2b60dcbae95e.html","relUrl":"notes\\2b9a1aec-3d9d-4f47-836e-2b60dcbae95e.html"},{"doc":"Lambda","title":"Lambda","hpath":"topics.cloud.aws.lambda","content":"\n\r\n\r\n**Container support- 12/2020 New**:\r\n- original lifecycle:\r\n    ![](/assets/images/2020-12-07-14-45-11.png)\r\n- container support lifecycle: \r\n    ![](/assets/images/2020-12-07-14-44-26.png)\r\n- inactivity:\r\n    ![](/assets/images/2020-12-07-14-46-15.png)\r\n","url":"https://angelarwang.com/dendron-notes/notes\\02421f98-cab3-4955-9175-9db60819e5f1.html","relUrl":"notes\\02421f98-cab3-4955-9175-9db60819e5f1.html"},{"doc":"Governance","title":"Governance","hpath":"topics.cloud.aws.governance","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\626e1dd7-6f6f-45aa-bf72-faca04b22244.html","relUrl":"notes\\626e1dd7-6f6f-45aa-bf72-faca04b22244.html"},{"doc":"Deployment","title":"Deployment","hpath":"topics.cloud.aws.deployment","content":"\n\r\nAWS Proton\r\n- \r\n","url":"https://angelarwang.com/dendron-notes/notes\\36636d89-cff6-43b1-baa9-e0db120a117a.html","relUrl":"notes\\36636d89-cff6-43b1-baa9-e0db120a117a.html"},{"doc":"Architecture","title":"Architecture","hpath":"topics.architecture","content":"\n\r\n## Robert C. Martin - Clean Architecture and Design\r\n\r\nrecording: https://www.youtube.com/watch?v=2dKZ-dWaCiU\r\nslides: https://t.co/QeDePKaJl6?amp=1\r\n- some back of envelope math: the numer of programmers in the world is doubling every few years => half of the programmers in the world have < 5 yrs of experience \r\n- software is everywhere - before a programmer kills 10,000 ppl and the industry becomes a heavily regulated industry, should have discipline \r\n- **The architecture should scream its purpose** like architect's house plans \r\n    - \"Object-Oriented Software Engineering: A Use Case Driven Approach\" book - Ivar Jacobson\r\n    - the web is detail - it's a type of I/O. e.g. in Unix I/O the application doesn't care what kind of thing it's writing to.\r\n- From Ivar: \r\n    - **Entities** = application independent rules : even if there's no computer\r\n    - **Interactors** = application specific business rules \r\n    \r\n    ![](/assets/images/2020-12-08-11-01-32.png)\r\n\r\n    - interactor can be tested without the web/delivery mech. \r\n\r\n- MVC \r\n    - MVC goes wrong and boundaries blur\r\n        ![](/assets/images/2020-12-08-11-10-09.png)\r\n    - Model View Presenter:\r\n        ![](/assets/images/2020-12-08-11-09-25.png)\r\n- Databases \r\n    ![](/assets/images/2020-12-08-11-12-42.png)\r\n\r\n- Story of FitNesse - acceptance testing + wiki framework  \r\n    - deferred the database \r\n    - ![](/assets/images/2020-12-08-11-17-07.png)\r\n\r\n- On testing: \r\n    - anything on the edge of the system is hard to test, e.g. GUI \r\n\r\n\r\nClean Architecture slides: https://www.dropbox.com/s/e60688nq18cnfz7/Clean%20Architecture.pdf?dl=0 \r\n \r\n","url":"https://angelarwang.com/dendron-notes/notes\\edcb01a7-1033-41f2-9428-9c3034fdc066.html","relUrl":"notes\\edcb01a7-1033-41f2-9428-9c3034fdc066.html"},{"doc":"Api Design","title":"Api Design","hpath":"topics.api-design","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\a943fdf0-9f93-40f9-8d93-09304935dd44.html","relUrl":"notes\\a943fdf0-9f93-40f9-8d93-09304935dd44.html"},{"doc":"Graphql","title":"Graphql","hpath":"topics.api-design.graphql","content":"\n\r\n\r\n## challenges\r\n- monitoring\r\n    - partial successes \r\n    - no easy error code like HTTP -> track \\#of exceptions \r\n\r\n- Query complexity (can have pathologically nested queries)\r\n    1. only allow cached queries (persisted queries)\r\n    1. calculate complexity score \r\n    1. calculate query depth\r\n- caching complexity \r\n    1. Data loader\r\n    1. client side caching\r\n\r\n### GraphQL @ Twitter\r\n- [Rebuilding Twitter’s public API\r\n](https://blog.twitter.com/engineering/en_us/topics/infrastructure/2020/rebuild_twitter_public_api_2020.html)\r\n\r\n- [GraphQL 2017 summit notes on GraphQL @ Twitter](https://about.sourcegraph.com/graphql/graphql-at-twitter/)\r\n    - authN handled by a layer before GraphQL. authZ handled by  lower-level services. the GraphQL API itself no auth responsibility\r\n        ![](/assets/images/2020-11-23-14-51-17.png)\r\n    - implementing subscriptions with existing internal event bus\r\n        ![](/assets/images/2020-11-23-14-57-50.png)\r\n    - Strato: internal tech. a virtual database, aka federated database, brings together multiple data sources so they can be queried and mutated uniformly\r\n    - \r\n### GraphQL Federation @Netflix \r\nnotes from 11/23/2020\r\n- [How Netflix Scales its API with GraphQL Federation (Part 1)](https://netflixtechblog.com/how-netflix-scales-its-api-with-graphql-federation-part-1-ae3557c187e2)\r\n- why graphQL: \r\n    - disparate teams building single-use aggregation layers \r\n    - teams building materialized views - data consistency issue\r\n- why federation:\r\n    - Bottleneck of the centralized graph API team - disconnected from the domain expertise and the product needs\r\n- Studio API federated GraphQL example\r\n    - new schema\r\n        ![](/assets/images/2020-11-23-10-43-55.png)\r\n    - architecture\r\n        ![](/assets/images/2020-11-23-10-44-10.png)\r\n    - Query planning and execution\r\n        ![](/assets/images/2020-11-23-10-43-12.png)\r\n    - detailed query plan\r\n        ![](/assets/images/2020-11-23-10-42-25.png)\r\n- architecture evolution\r\n    ![](/assets/images/2020-11-23-10-44-47.png)\r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\3bf41e97-8aeb-4462-bb76-168cebb241b4.html","relUrl":"notes\\3bf41e97-8aeb-4462-bb76-168cebb241b4.html"},{"doc":"Tag","title":"Tag","hpath":"tag","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\e91fc5d0-920a-4e08-8874-c9268ca1cc59.html","relUrl":"notes\\e91fc5d0-920a-4e08-8874-c9268ca1cc59.html"},{"doc":"Rust","title":"Rust","hpath":"tag.rust","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\f17a0af2-4b92-4464-ba66-f5eea84b5bd6.html","relUrl":"notes\\f17a0af2-4b92-4464-ba66-f5eea84b5bd6.html"},{"doc":"Reference","title":"Reference","hpath":"reference","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\1964e27b-2fdf-44b5-9340-6a0fc17c5676.html","relUrl":"notes\\1964e27b-2fdf-44b5-9340-6a0fc17c5676.html"},{"doc":"Unix","title":"Unix","hpath":"reference.unix","content":"\n\r\n### Quick per line processing\r\n\r\ne.g. clean up S3 buckets \r\n\r\n```\r\nwhile read -r line ; do; echo $line; aws s3 rm s3://$line --recursive && aws s3 rb s3://$line ; done\r\n```\r\n","url":"https://angelarwang.com/dendron-notes/notes\\5d1093c0-c427-4f73-99bc-4d93fe865e82.html","relUrl":"notes\\5d1093c0-c427-4f73-99bc-4d93fe865e82.html"},{"doc":"Hobbies","title":"Hobbies","hpath":"hobbies","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\5cda1053-d80d-49ca-8433-c0abaac2f632.html","relUrl":"notes\\5cda1053-d80d-49ca-8433-c0abaac2f632.html"},{"doc":"Sports","title":"Sports","hpath":"hobbies.sports","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\MkwocHlplduRUBLdVwtwx.html","relUrl":"notes\\MkwocHlplduRUBLdVwtwx.html"},{"doc":"F1","title":"F1","hpath":"hobbies.sports.f1","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\uNiLDMzsk4APCJNe5Go8w.html","relUrl":"notes\\uNiLDMzsk4APCJNe5Go8w.html"},{"doc":"2021","title":"2021","hpath":"hobbies.sports.f1.2021","content":"\n## 10/24 Austin \n- circuit of americas \n  - first ever circuit purposely built for F1 \n  - turn 1: elevation 27 m\n\n## 11/7 Mexico\n- highest elevation: 2km above sea level \n","url":"https://angelarwang.com/dendron-notes/notes\\o8B6QWQOFpuSY3iqoh8YM.html","relUrl":"notes\\o8B6QWQOFpuSY3iqoh8YM.html"},{"doc":"Skiing","title":"Skiing","hpath":"hobbies.skiing","content":"\n## 2021\n\n- [New Hampshire backcountry](https://medium.com/@angelarw/valentines-week-2021-part-1-new-hampshire-backcountry-fb57bb0269b4)\n- [Maine resort](https://angelarw.medium.com/valentines-week-2021-part-2-maine-resort-skiing-3eb044e6c70)\n- [Skiing tucks](https://angelarw.medium.com/easter-weekend-2021-tuckerman-ravine-e146ecae96d9)","url":"https://angelarwang.com/dendron-notes/notes\\abdea430-a6e2-494c-922e-bf64fc1d86c4.html","relUrl":"notes\\abdea430-a6e2-494c-922e-bf64fc1d86c4.html"},{"doc":"Sewing","title":"Sewing","hpath":"hobbies.sewing","content":"\n\r\n\r\n- intro video on Udemy: https://www.udemy.com/course/how-to-sew\r\n- Choosing sewing machines\r\n    - front loading bobbin \r\n    - drop-in bobbin - easier for beginner \r\n- supplies\r\n    - [x] scissors, iron, iron board\r\n    - [x] seam ripper \r\n    - [x] pin \r\n    - [ ] pin cushions\r\n    - [ ] machine needle and hand needle\r\n        - Choosing machine needles: https://www.singer.com/sewing-machine-needles\r\n    - [ ] tailor's chalk \r\n    - [ ] tracing paper and wheel\r\n\r\n#### Darning jeans \r\n- supplies\r\n    - [] cotton darning thread \r\n    - [] stablizing fabric: cotton organdy or muslin\r\n    \r\n","url":"https://angelarwang.com/dendron-notes/notes\\b5bec914-8e1c-441c-80d2-f152cbc25367.html","relUrl":"notes\\b5bec914-8e1c-441c-80d2-f152cbc25367.html"},{"doc":"Cooking","title":"Cooking","hpath":"hobbies.cooking","content":"\n\r\n### Pizza\r\n\r\nPizza dough: https://thefoodery.la/pizza-dough/\r\n\r\n### perfect instant pot oatmeal\r\n- 1.25 cups oatmeal\r\n- 4 cups water \r\n- 8 min cook \r\n- 8 min release\r\n\r\n\r\n### Tofu Nama chocolate \r\n\r\ningredients:\r\n- dark chocolate 150g (I used 70% dark chocolate bar) \r\n- silken tofu ~90g \r\n- a few drops of alcohol of your choice (rum, whiskey, etc) - optional\r\n- coco powder \r\n\r\nsteps：\r\n1. melt dark cholocate (I steamed it. something like this https://www.thekitchn.com/the-best-way-to-melt-chocolate-alice-medrichs-smart-easy-method-expert-tip-197405 works too)\r\n2. make silken tofu into a paste (you can put the tofu in a plastic bag, cut a tiny opening and squeeze the tofu through. then you can put that tofu through a fine mesh strainer - use the back of a spoon to push it through to the other side then collect it)\r\n3. stir the tofu into melted chocolate, mix well. mix in a few drops of alcohol if you like \r\n4. find a square container, line the bottom with plastic wrap, put the chocolate mixture in, flatten\r\n5. put in the fridge for an hour\r\n6. take it out, cut it into squares and spread coco powder on it\r\n\r\n### Chicken pot pie\r\n\r\n1. i cook 1lb of chicken with some olive oil and whatever seasoning i feel like at the time. preheat oven to 425  \r\n2. cut either 1 potato or turnip into small chunks, boil it and drain\r\n3. in a pot, saute chopped onion, carrot, celery, mushroom \r\n4. add in the cooked chicken, frozen peas and the potato/turnip from step 2 \r\n5. flavor it with soysauce and curry powder, cook a few min \r\n6. add in water + 3/4 cup flour, mix and cook until you like the consistency \r\n7. take frozen crust from the freezer. pour into the bottom crust with the tin. peel the second crust from the tin, cover it on top and make some slits or holes on the top \r\n8. bake it for 40-50 minutes. in the last 15 min or so i put the tin back on the top so it doesn't get too burned \r\n9. take it out and let it sit for 10 min\r\n\r\n### Gazpacho\r\n\r\nhttps://cookieandkate.com/ultimate-gazpacho-recipe/","url":"https://angelarwang.com/dendron-notes/notes\\e64b6f7d-e6b5-4528-9b0e-f91965791ca0.html","relUrl":"notes\\e64b6f7d-e6b5-4528-9b0e-f91965791ca0.html"},{"doc":"Frameworks","title":"Frameworks","hpath":"frameworks","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\3cce73ba-3a76-4ee2-80e9-a4b338e1360c.html","relUrl":"notes\\3cce73ba-3a76-4ee2-80e9-a4b338e1360c.html"},{"doc":"Big data","title":"Big data","hpath":"frameworks.big-data","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\b26ba764-c2c2-4d3f-93b6-2fde6e596463.html","relUrl":"notes\\b26ba764-c2c2-4d3f-93b6-2fde6e596463.html"},{"doc":"Apache Beam","title":"Apache Beam","hpath":"frameworks.big-data.beam","content":"\n\r\n## Overview\r\n\r\n* [2018 PyCon talk - Streaming data processing pipelines with Apache Beam in Python](https://www.youtube.com/watch?v=I1JUtoDHFcg)\r\n\r\n\r\n![](/assets/images/2020-11-05-15-17-16.png)\r\n\r\n- **Beam** is a collection of SDKs for streaming processing pipeline\r\n    - name come from 'Batch' + 'strEAM'\r\n    - https://github.com/apache/beam\r\n    - ![](/assets/images/2020-11-05-15-22-21.png)\r\n    - ![](/assets/images/2020-11-05-15-23-36.png)\r\n        - Streaming + accumulation: built-in fucntionality for handle late packets  \r\n    - Beam Pipeline is a DAG graph \r\n    - **Bounded** (batch) vs **Unbounded** (streaming, with windows)\r\n    - **PCollection** == data elements \r\n        - iterable collection\r\n        - immutable -readonly                \r\n    - **PTransform** == nodes in the graph \r\n        ```python\r\n        records = (p \r\n            | 'Read from PubSub' >> beam.io.ReadStringsFromPubSub(topic=..., id_label='MESSAGE_ID')\r\n            | 'Parse JSON to dict' >>  beam.Map(lambda e: json.load(e))\r\n\r\n        # branch 1\r\n        records | beam.ParDo(AddTimstampToDict())\r\n                    | beam.WindowInto(window.SlidingWindows(..))\r\n                    | beam.ParDo(AddKeyToDict())\r\n                    | beam.GroupByKey()\r\n                    | beam.Pardo(CountAverages())\r\n                    | beam.io.WriteToBigQuery(...)\r\n\r\n        # branch 2          \r\n        records | beam.io.WriteToBigQuery(...)\r\n        ```\r\n\r\n- **Cloud Dataflow** - managed service \r\n\r\n\r\n\r\n\r\n\r\n### On AWS \r\n\r\n* Workshop on using Beam with Kinesis Flink: https://beam-streaming-analytics.workshop.aws/en/beam-on-kda.html\r\n","url":"https://angelarwang.com/dendron-notes/notes\\270884d9-210b-42e0-88a3-7193738d3233.html","relUrl":"notes\\270884d9-210b-42e0-88a3-7193738d3233.html"},{"doc":"Daily","title":"Daily","hpath":"daily","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\dLSnuBJ7r2uRSvwpnONol.html","relUrl":"notes\\dLSnuBJ7r2uRSvwpnONol.html"},{"doc":"Journal","title":"Journal","hpath":"daily.journal","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\emNQCarwFyG1gemyUXAfp.html","relUrl":"notes\\emNQCarwFyG1gemyUXAfp.html"},{"doc":"2021","title":"2021","hpath":"daily.journal.2021","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\zTyjvliaRqdA1CfAm6wUY.html","relUrl":"notes\\zTyjvliaRqdA1CfAm6wUY.html"},{"doc":"09","title":"09","hpath":"daily.journal.2021.09","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\9RkXLpPwMkjikF9pdtFmB.html","relUrl":"notes\\9RkXLpPwMkjikF9pdtFmB.html"},{"doc":"2021-09-20","title":"2021-09-20","hpath":"daily.journal.2021.09.20","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\timR8CQ5XiWObB51gNyu8.html","relUrl":"notes\\timR8CQ5XiWObB51gNyu8.html"},{"doc":"Courses","title":"Courses","hpath":"courses","content":"\n\r\nMy notes from taking MOOCs \r\n","url":"https://angelarwang.com/dendron-notes/notes\\b0e90360-9cfe-47a5-b978-d007c2f1f305.html","relUrl":"notes\\b0e90360-9cfe-47a5-b978-d007c2f1f305.html"},{"doc":"Neuroscience","title":"Neuroscience","hpath":"courses.neuroscience","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\yGOriWNxn1tOFbOYDKiag.html","relUrl":"notes\\yGOriWNxn1tOFbOYDKiag.html"},{"doc":"Fundamental-Neuroscience-for-Neuroimaging","title":"Fundamental-Neuroscience-for-Neuroimaging","hpath":"courses.neuroscience.Fundamental-Neuroscience-for-Neuroimaging","content":"\nhttps://www.coursera.org/learn/neuroscience-neuroimaging/home/welcome\n\n## Anatomy\n- Neurons 神经元细胞\n  - ![](/assets/images/2021-09-09-09-38-10.png)\n  - Axon: transmits electrical signal 轴突\n  - axon terminal: = presynaptic terminal, end on adjoining dendrites or cell body\n  - Dendrites: receives contact 树突\n- Glia  神经胶质细胞\n  - majority of cells \n  - function\n    - connective tissue\n    - metabolic support roles\n    - remove excessive secretions\n    - produces myelin=insulates neurons\n- Structural anatomy\n  - cytoarchitectural organization\n  - dissociable brain structure \n  - dissociable brain networks\n  - rudimental classification\n    ![](/assets/images/2021-09-09-09-53-59.png)\n- vascular anatomy\n  - ![](/assets/images/2021-09-09-10-07-58.png)\n  - circle of willis: blood enter brain\n    - anterior cerebral artery\n  - ![](/assets/images/2021-09-09-10-13-09.png)\n- Similarity with other animals\n  - similar structure, human just bigger cortex\n  - allows experiment on simpler animals\n- development stages\n  - cortex last \n  - ![](/assets/images/2021-09-09-11-40-53.png)\n\n## Terminology\n-axis\n  - Rostrum 嘴 cauda 尾\n  - dorsal 背 ventrum 腹\n    \n    ![](/assets/images/2021-09-09-11-44-44.png)\n- human\n\n  ![](/assets/images/2021-09-09-11-46-49.png)\n  - superior - inferior\n  - antirior - posterior\n  - medial - lateral \n- planes\n\n  ![](/assets/images/2021-09-09-11-47-54.png)\n  - in MRI\n    - coronal = frontal\n    - axial - transverse\n    - sagittal\n    \n    ![](/assets/images/2021-09-09-11-48-41.png)\n    - left vs right in frontal view \n      - radiological convention: left on right side of image\n        - face forward\n      - neurological convention: left is left in image\n        - face backward\n    - use fiduciary marker - right side\n\n      ![](/assets/images/2021-09-09-11-53-58.png)\n\n- proximal 近vs distal\n- ipsilateral 同側vs contralateral 異側\n\n## Methods of Communication in the Brain\n\n- reticular 网状 theory (Golgi)\n  - connected reticular net \n- neuron doctrine\n  - neurons are independent, contigual not continual \n- types:\n  - sensory neuron - external stimuli -> electrical signals\n  - interneuron - processing & relay\n  - motor neuron - electrical signals-> muscle or gland movement\n- ion channels & ion pumps \n  - ![](/assets/images/2021-09-09-12-54-33.png)\n  1. influx of Ca++ -> synaptic vesicles fuse with pre-synaptic membrane\n  1. transmitter released into cleft\n  1. transmitter binds receptor molecules on post-synaptic membrane\n  1. post-synaptic channels then open/close based on binding\n  1. opneing -> influx of ions (Na+/K+) / close -> prevents\n  1. causes either depolarize or hyper-polarize \n  1. if post-synaptic voltage large enough -> electrochemical pual is generated = action potential\n  1. simultaneously\n      - action potential travels down axon. \n      - used vesicle is retrieved and recycled\n  1. new transmitter is synthesized \n\n  - ![](/assets/images/2021-09-09-12-55-57.png)\n  - Excitatory post-synaptic potential (EPSP)\n    - sometimes sum of EPSPs from multiple neuros are necessary for action potential  \n      ![](/assets/images/2021-09-09-13-02-43.png)\n  - recording \n    - ![](/assets/images/2021-09-09-13-04-08.png)\n    - inside neuron (1)\n    - outside neuron (2)\n      - extracellular eletrode can only measure local neuronal environment (local field potential LFP)\n- different neurotransmitters (>50)\n  - by makeup\n    - amino acids\n      - glutamate\n      - aspartate\n      - glycine\n      ...\n    - peptides\n      - somatostatin\n      ...\n    - others \n      - Serotonin 血清素\n      - Histamine 组胺\n      - Melatonin 褪黑素\n      - Norepinephrine 去甲肾上腺素\n  - by excitatory vs inhibooary\n    - excitatory \n      - epinephrine 肾上腺素\n      - norepinephrine\n    - inhibitory\n      - serotonin\n      - GABA\n    - both\n      - dopamine\n  - important examples\n    - acetylcholine 乙酰胆碱\n      - excitatory \n      - activates motor neurons\n      - attention, arounsal, learning, memory\n      - low levels in Alzheimers\n    - dopamine\n      - fine movements\n      - positive emotions\n      - abnorally low levels in Parkinsons\n      - abnorally high in frontal areas of schizophrenia\n    - glutamate 穀氨酸\n      - most commonly found\n      - learning & memory\n      - execessive production is toxic (ALS)\n      - binds to AMPA, open, allow Na+ in\n      - binds to NMDA, open, allow Ca++ in\n      - ![](/assets/images/2021-09-09-13-33-16.png)\n  - different receptor react to different neurotransmitters \n    - ![](/assets/images/2021-09-09-13-34-11.png)\n    - agonist 激动剂\n    - competitive antagonist - blocks other agonist from binding\n    - non-competitive antagonist - different site \n- interaction with body\n  - direct innvervation through spinal cord + peripheral nerve system \n    - cranial nerves\n      \n      ![](/assets/images/2021-09-09-13-41-15.png)\n    - corticospinal tracts\n      \n      ![](/assets/images/2021-09-09-13-41-42.png)\n  - through hormones in vascular system\n    - brain is neurochemically protected by BBB **blood-brain barrier**\n      - ![](/assets/images/2021-09-09-13-46-06.png)\n      - endothelial cells line blood vessels\n      - needed material is actively transported, like glucose\n      - only small hydrophobic molecules e.g. O2 are allowed through\n      - prevents toxins, bacateria, etc. \n    - parts not protected by BBB：\n      - hypothalamus 下丘脑\n      - pituitary 脑下垂体\n      - pineal glands 松果体\n      - regulates temperature, thirst, hunger, circadian rhythm, sleep, stress response, etc. \n    - bi-directional \n      - e.g. adrenaline/epinephrine\n        - through blood, activates sympathetic nervous system 交感神经: fight/flight responses\n        - binds to receptors on vagal nerve -> releases glutamate -> encode the event to remember for future\n\n## Functional anatomy\n- cerebrospinal fluid CSF 脑脊液\n  - protects brain and spinal cord from trauma\n  - supply nutrients\n- grey matter\n  - contains neuronal cell bodies\n  - info processing \n- white matter\n  - fiber bundles of axon projects \n  - information transmission \n- primary motor cortex\n  - dorsal portion of frontal lobe\n  - plan movements\n  - send long axons down spinal cord \n  - ![](/assets/images/2021-09-09-14-07-37.png)\n- primary somatosensory cortex\n  - receives sensory input\n  - ![](/assets/images/2021-09-09-14-09-10.png)\n  - amount of cortex is proportional to density of tactile receptors \n- thalamus 丘脑 \n  - relay sensory and motor signal\n  - regulation of sleep and consciousness\n- visual cortex\n  - orientation \n    - ![](/assets/images/2021-09-09-14-13-08.png)\n  - what or where pathway\n    - ![](/assets/images/2021-09-09-14-13-47.png)\n- cerebellum 小脑\n  - seperate structure\n  - receive from sensory, spinal\n  - coordinates posture, balance, timing coordination\n\n- Organization of Cognitive Domains\n  - language\n    - Broca's aphasia\n      - ![](/assets/images/2021-09-09-14-21-48.png)\n      - understand words and simple sentences\n      - know what they want to say\n      - unable to generate fluent speech\n    - Wernicke area - silent, writing \n      - receptive aphasia\n      - unable to comprehend. can express \n    - ![](/assets/images/2021-09-09-14-24-25.png)\n  - Gage 1848 accident\n    - speech/motor still functions\n    - severe personality change \n      ![](/assets/images/2021-09-09-14-26-15.png)\n  - memory \n    - patient H.M.\n      - removed bilateral hippocampus 海马体, amygdala 杏仁体 and surrounding cortext to fix seizure\n      - intact language, IQ, working memory and motor control\n      - unable to learn new facts/events\n      - unable to remember anything since the surgery \n      - but he's able to improve some motor skills (draw star) but don't consciously remember -> must be multiple area\n    - multiple systems\n      - medial temporal lobe\n      - basal ganglia 基底核\n        - fine motor planning and movements\n        - stratum: reward, reinforcement\n        - motor learning, stimulus response learning\n        - ![](/assets/images/2021-09-09-17-26-16.png)\n  - specific tasks\n    - fusiform face area - recognizing faces\n      ![](/assets/images/2021-09-13-20-39-39.png)\n\n### Neuropsychological Assessment of Cognition\n\nNeuropsychology: behavioral expression of brain function\n\n- cognition\n  - initially: single function of intelligence. IQ=100 is median\n- emotionality\n- executive \n\n- Screening testing\n  - RBANS\n  - MMSE\n  - MOCA\n- Hypothesis testing\n-  Neuropsychological battery approach\n  - comprehensive\n\nExample\n- memory assessment\n  - Wechsler memory scale\n    - personal and current info\n    - orientation\n    - mental control\n    - logical memory\n    - digit span \n    - visual repro\n    - paired associate\n  - word list learning\n- Executive\n  - volition\n  - planning\n  - purposive action\n  - effective performance\n  - e.g. Stroop word test - word \"red\" colored in blue \n\n\n## Approaches to Neuroimaging\n\n- Categories\n  - structural \n    - anatomy\n    - pathology\n  - functional \n    - metabolic\n    - pharmacologic\n    - cognitive\n- techniques \n  - EEG \n    - measure activity through electrodes on scalp\n  - CT - computed axial tomography\n    - series of xrays\n    - many cross sections rescontructed to a 3D volume\n    - fast, but moderate radiation\n  - single photoon emission computed tomograph - SPECT 单光子发射计算机断层成像术\n    - gamma emitter tracer through 静脉注射\n    - spacial resolution not good - a few cm\n  - PET - positron emission tomography\n    - positron emitting radionuclide that binds to biologically active molecule\n      - FDG-PET: marker for glucose uptake (tumors, Alzheimers)\n      - 18F-AV-45 PET market for beta amyloid (protein occursi in Alzheimer's)\n        ![](/assets/images/2021-09-20-21-22-35.png)\n    - detects pairs of gamma rays \n    - higher resolution than SPECT\n    ![](/assets/images/2021-09-20-21-19-25.png)\n  - MRI\n    - static + variable 磁场 perturb H atoms\n    - resulting resonance is masured by radio frequency receivers\n    - different pulse sequence -> different contrast for tissue type\n    - magnetic field is 60x stronger than earth\n      - ppl w pace maker should never do MRI\n      - dangerous to ave metallic objects in vicinity\n    - no radiation/known side effects \n    - high resolution\n    \n    ![](/assets/images/2021-09-20-21-24-39.png)\n    ![](/assets/images/2021-09-20-21-29-43.png)\n    - -270C super conducting metal\n    - additional head antenae\n      ![](/assets/images/2021-09-20-21-31-06.png)\n  - fMRI\n    - magnetic resonance from oxygenated vs non-oxygenated blood \n  - diffusion tensor imagining \n    - refined application of MRI \n    - measures directionality of water molecules \n    - assess fiber projecttions & white matter integrity\n      ![](/assets/images/2021-09-20-21-33-28.png)\n  - spectroscopy\n    - refined application of MRI \n    - magnetic signatures of various metabolites \n      ![](/assets/images/2021-09-20-21-34-25.png)\n\n### Basics of MRI\n\n- MRI signal\n  - spin both its own axis and the magnetic field\n    ![](/assets/images/2021-09-20-21-39-02.png)\n    - parallel: low energy\n    - anti-parallel: high energy \n  - after a few seconds, reach equilibrium, all protons are aligned \n  - static field can't be measured. MRI signal introduces different direction perpendicular to the main field, causes protons to move away from axis\n    ![](/assets/images/2021-09-20-22-16-11.png)\n    - when stops, procession back to original alignment\n    - t1 & t2 plane\n      - t1: longitutional (original field position)\n        ![](/assets/images/2021-09-20-22-14-26.png)\n      - t2: transverse\n      ![](/assets/images/2021-09-20-22-10-11.png)\n    - the procession induces a signal in receiver coil\n    - relaxation time: time it takes to recover after being disturbed \n    - different biological matter have different but consistent t1 and t2 relaxation times\n      ![](/assets/images/2021-09-20-22-12-11.png)\n      - tumor also different \n      ![](/assets/images/2021-09-20-22-12-29.png)\n    - ![](/assets/images/2021-09-20-22-13-24.png)\n  - spatial specificity \n    - **Larmor frequency** frequeny needed to changea spin from low to high energy spin \n      ![](/assets/images/2021-09-20-22-17-44.png)\n      ![](/assets/images/2021-09-20-22-18-02.png)\n      - MRI mostly targeting water molecules\n    - Larmor frequency depends on local magnetic strength\n    - create bands of frequency/magnetic gradient \n    - put together:\n      - linear gradients create sptial specificity\n      - radio purlse selectively excites slices\n      ![](/assets/images/2021-09-20-22-25-17.png)\n- fMRI \n  - ![](/assets/images/2021-09-20-22-29-29.png)\n  - oxygenated hemoglobin vs de-O hemoglobin have different effects on dephasing - de-O hemoglobin cause more dephasing \n    ![](/assets/images/2021-09-20-22-31-19.png)\n  - Blood Oxygen Level Dependent (BOLD) MRI \n  - measure changes in homogeneity in magnetic field (T2*)\n    - T2: transverse magnetization decay of a spin after radio frequency pulse\n    - T2*: transverse magnetization decay from local magnetic field variations\n    - ![](/assets/images/2021-09-20-22-36-34.png)\n    - de-O hemoglobin: paramagnetic, introduces inhomogeneity\n    - O hemoglobin: little effect \n  - BOLD signal:\n    - HRF: hemodynamic response function  \n    ![](/assets/images/2021-09-20-22-41-50.png)\n    - it doesn't measure neural activity directly\n    - measures metabolic demands\n  - physiological basis:\n    ![](/assets/images/2021-09-20-22-44-12.png)\n    1. glutamate releases \n    1. open post-synaptic ion channels\n    1. re-uptake of glutamate by astrocyte triggers glucose metabolism\n    1. astrocytes pump out ions to restor ionic gradients\n    1. processes use glucose + O2\n    - MUA- multi-unit activity\n    - LFP local field potential = summation of post-synaptic potential more correlated (but delayed) w BOLD activity \n    ![](/assets/images/2021-09-20-22-48-21.png)\n\n\n## MRI studies\n- structural \n  - qualitative eval\n    - ![](/assets/images/2021-09-20-23-00-51.png)\n  - volumetric analysis:\n    - count voxels -> difference of volume of various parts compared to controls \n    - automatic segmentation\n  - analyze cortical thickness\n    ![](/assets/images/2021-09-20-23-05-08.png)\n  - strutural morphology: compare shape differences\n    ![](/assets/images/2021-09-21-19-46-04.png)\n\n  - example of correlating behavioral w structual analysis:\n    - [Aerobic Exercise Training Increases Brain Volume in Aging Humans](https://academic.oup.com/biomedgerontology/article/61/11/1166/630432)\n  - many reasons for structural brain changes:\n    - development/atrophy\n    - exercise\n    - substance use \n    - inflammation / edema\n    - gliosis\n    \n- fMRI studies\n  - spatial resolution: 1-1.5 mm\n  - temperal resolution ~0.5 sec\n  - no long lasting effects \n  ![](/assets/images/2021-09-21-20-40-23.png)\n  - block of epoch design\n    - repetitive on and off time\n    - simple to design, robust activation due to large number of trials\n    - con：\n      - assume single mode of activiation at consistant level over repititions\n  - event related design\n    - pro:\n      - flexible analysis\n    - con:\n      - reduced detection power\n      - sensitive errors in hemodynmaic response function \n  - cognitive subtraction\n    - assumption: different cognitive components are additive\n    - subtract activitation of control task from that of experiment task can isolate effects of that difference in task (taskA-taskB)\n    - subtraction is only valid if condition differs in only one property  \n      - e.g. **using resting condition as control is bad** \n      - [When zero is not zero: the problem of ambiguous baseline conditions in fMRI](https://pubmed.ncbi.nlm.nih.gov/11592989/)  \n      - find face recognition\n        ![](/assets/images/2021-09-21-20-53-02.png) \n\n## Experimental design\n\ntechnical limitation\n  - limited visual field + response options\n  - scanner drift - each runs limit to 4-6 min, then restart \n    - longer will cause heat up, change accuracy\n  - subject motion: - mm movmement change will interfere \npsychological state\n\npsychological state\n  - is the subject effectively engaged?\n    - ![](/assets/images/2021-09-23-21-09-19.png)\n    - after subject answers, maybe mind drifts off to think about other things \n  - are they using shortcuts to solve the problem?\n  - how long does the psychological state last\n  - does the task induce unintended psych state?\n    - e.g. get anxious or frustrated \n  \nstatistical design\n  - substraction\n  - factorial \n    - multiple factors & interaction\n      ![](/assets/images/2021-09-23-21-15-15.png)\n  - parametic\n    - increase levels of difficulty \n  - measure before/after intervention e.g. drug/training/therapy\n  \n### Functional connectivity MRI \n- Hebbian principle: cells fire together, wire together \n- spatial correlation vs temporal correlations\n- voxel to voxel connectivity\n  - compare every voxel against every other\n- seed based connectivity\n  - pick an area, compare other areas with that \n- independent componenet analysis\n  - how many independent networks are at work?\n    - DMN default mode network \n      - highly correlated during wakeful rest\n      - less active of external task\n        ![](/assets/images/2021-09-23-21-30-09.png)\n      - developmentally established:\n        - more developed as kid grows up\n      - overlap with structural connectivity \n      - neurological basis of self, self-reference, theory of mind, social cognition\n      - support comprehension, learning, memory\n      - support thinking of past and future \n      - deactivation of DMN correlate:\n        - memory encoding\n        - task difficulty\n      - activiation of DMN after learning improves memory\n      - connectivity in DMN observed in\n        - alzheimer's\n        - autism\n        - depression\n        - aging\n        - schizophrenia\n        - epilepsy \n        - OCD\n        - anoerexia nervosa\n        ...\n\n### Diffusion Tensor Imaging\n\n- Hydrogen\n - unpaired proton -> magnetic properties, sutied to disturb the local static mag field \n - unibiquitous - water & fat issue\n- water diffusion:\n  - isotropic: all directions\n  - anisotropic: has dimensionality\n- brain\n  - grey matter - cell bodies- isotropic\n  - white matter - axon - anisotropic\n- DTI: \n  - gradient pulses\n    - cancel out for stationary H2O\n    - lack of signal for diffusing molecules\n  - for each voxel, find the eigenvalues for each eigenvector\n  ![](/assets/images/2021-09-25-16-51-08.png)\n  - probablistic fiber tracking\n    ![](/assets/images/2021-09-25-16-51-47.png)\n\n    ![](/assets/images/2021-09-25-16-52-09.png)\n- studies\n  - fractional anisotropy\n    - 0: isotropic diffusion\n    - 1: diffusion in 1 direction \n    - measure\n      - fiber density\n      - white matter integrity\n  - FA correlation with symptoms\n    - e.g. OCD \n  - DTI tracography in surgical planning \n    - tumor removal planning\n    - eletrode simulation \n### Magnetic Resonance Spectroscopy\n\n- processions causes a small local magnetic field, opposite direction of static mag field \n- change the local effective mag field, causes resonance frequency to shift \"chemical shift\"\n  - value of the shift gives info about the molecular group of that nucleaus\n  - MRS quantify local presence of certain chemical compounds\n  ![](/assets/images/2021-09-25-17-07-47.png)\n\n  ![](/assets/images/2021-09-25-17-09-13.png)\n  - spectra can be obtained from different nuclei but H most common\n\n- water signal must be suppressed\n  - Chemical Shift Selective suppression pre-saturate water signal using spepcifc pulse frequency\n- sepctra provide metabolite concentration in different area of brain \n- common metabolite\n  ![](/assets/images/2021-09-25-17-16-17.png)\n  -  NAA N-acetylaspartate\n     - normally highest peak in normal brain \n     - decrease <-> white matter disease, malignant neoplasms\n  - Cr creatine\n    - marker for energetic system and intracelluar metabolism\n    - reduced siganal in tumors \n  - Cho Choline \n    - marker of celluar membrane turnover - cellular proliration \n    - incrase in infarction梗塞/inflammation\n  - LacLactate \n    - marker of anerobic metabolism, e.g. cerebral hypoxia, ischemia, seizures, metabolic disorders, \n    - occur in cysts, normal pressure hydrocephalus 腦積水, certain tumors\n- clinally: \n  - most used in brain tumors, metabolic disorders \n\n\nbook recommendations\n  - Principles of Neural science - Kandel, schwartz \n","url":"https://angelarwang.com/dendron-notes/notes\\8ElJoIeJIuv6tJ1yeE27w.html","relUrl":"notes\\8ElJoIeJIuv6tJ1yeE27w.html"},{"doc":"Investments II","title":"Investments II","hpath":"courses.investments","content":"\n\r\n\r\nhttps://www.coursera.org/learn/investments-applications/home/welcome \r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d4747935-416b-44ef-abe2-c472208aa31b.html","relUrl":"notes\\d4747935-416b-44ef-abe2-c472208aa31b.html"},{"doc":"Week 3 - Individual investors","title":"Week 3 - Individual investors","hpath":"courses.investments.week3","content":"\n\r\n- Transaction cost:\r\n    - commission/fees to brokerage\r\n    - bid-ask spread:\r\n        - when buying, pay ask price\r\n        - when selling, pay bid price\r\n- overview of individual investor performance \r\n    - ![](/assets/images/2020-12-26-15-28-28.png)\r\n    - ![](/assets/images/2020-12-26-16-15-30.png)\r\n        - in `()` = p value. only stat. significant if < 0.05  \r\n        - average household: benchmarked against simpling holding: no difference \r\n        - CAPM: no difference\r\n        - 3-factor - alpha also not stat. significant\r\n            - tilt towards value (positive coeff)\r\n            - tilt towards SMB (institutional tend to do more large stock) - which tends to have higher bid-ask spread -> more transaction cost\r\n    - once taken into account of transaction cost, average household under perform against the benchmarks\r\n\r\n- loss aversion\r\n    - assymetry:\r\n        - tend to hold on to stock with losses (expected utility of selling is worse than holding)\r\n            ![](/assets/images/2020-12-26-16-25-19.png) \r\n        - tend to capture gains \r\n            ![](/assets/images/2020-12-26-16-26-19.png)\r\n    - loss-aversion good or bad?\r\n        - go against **momentum effects**\r\n        - against tax incentives\r\n            - loss aversion effect is stronger in tax-deferred accounts (in regular accounts, the tax incentive reduces the loss aversion effect) - so tax motivation still matters  \r\n    - personal connection to asset\r\n        - emotional connection: house \r\n        - Genesove and Mayer(2001):\r\n            - if house has fallen value since purchase:\r\n                - takes longer to sell\r\n                - effect 2x for owner-occupants\r\n        - having someone to blame affects trading\r\n            - ![](/assets/images/2020-12-26-16-51-07.png)\r\n            - effect is reversed for mutual funds - loss -> more likely to sell - tax effect more important, easy to blame the fund manager\r\n    -  impact on corporate finance decisions       \r\n        - firm acquisition: \r\n            - offer's chance of success jumps discontinously when offer price exceeds past 52-week peak\r\n        - equity issuance (sell stock to raise cash):\r\n            - influenced by the stock price when a CEO joined the firm\r\n                -> suggest a firm with past poor stock return may need to fire current CEO if they wish to raise cash by selling equity\r\n    - explanation for momentum?\r\n        - when the stock goes up with good news, the cashing-in effect dampens the initial price increase\r\n        - when stock goes down with bad news, the hold effect dampens initial drop\r\n    - Importance of endowment effect\r\n        - endowment effect:\r\n            - people given coffee mug and asked if they would trade it for chocolate. 89% keep the mug\r\n            - initially given chocolate, only 10% wants to trade it for mug\r\n            - given both choices at start, 56% choose mug\r\n        - tax witholding \r\n            - emotion on tax day: less upset with the witholding model\r\n            - benchmark: after-tax income\r\n        - credit card \r\n            - current vs future wealth\r\n        - annuities\r\n            - current wealth vs future consumption \r\n    - emotions and financial decisions\r\n        - are psychopaths best investors? - shiv, et al 2005 \r\n            - factors:\r\n                - loss aversion: more likely to invest after losing last round\r\n                - house-money effect: more likely to invest after winning\r\n                - representatives: more likely to invest after winning\r\n           - ![](/assets/images/2020-12-27-17-07-33.png)\r\n- Skill of individual investors?\r\n    - local investments\r\n        - on average, household allocate 1/3 to local stocks (hq within 250 miles) vs 1/8 if spread evenly \r\n    - concentrated accounts with 1 or 2 stocks (especially wealthy households) seems to have better information than more diversified:\r\n        - ![](/assets/images/2020-12-27-17-28-46.png)\r\n    - ![](/assets/images/2020-12-27-17-34-51.png)\r\n        - various robustness tests \r\n            - after excluding stocks with certain characteristic, result still hold\r\n","url":"https://angelarwang.com/dendron-notes/notes\\4e0beeba-4c09-4da5-85de-2afd17f126ae.html","relUrl":"notes\\4e0beeba-4c09-4da5-85de-2afd17f126ae.html"},{"doc":"Week 2 - Investment Decisions in DC Pension Plans","title":"Week 2 - Investment Decisions in DC Pension Plans","hpath":"courses.investments.week2","content":"\n\r\n## key biases in DC pension plan\r\n- endorsement effect\r\n    - when company match is in company stock, has implicit endorsement effect \r\n- naiive diversification\r\n    - influenced by composition of choices, even if some of choices are duplicative\r\n        - ![](/assets/images/2020-12-26-13-42-18.png)\r\n        - the marginal funds added are typically stock funds. the more options, more proportion is put into stock funds\r\n        - ![](/assets/images/2020-12-26-13-44-58.png)\r\n- option confusion - too many options, people either not participate or end up choosing familiar options\r\n\r\n## Annuities\r\n\r\nlike insurance. turn lump sum into ganrateed monthly payments regardless of how long you live\r\n","url":"https://angelarwang.com/dendron-notes/notes\\a8d93cd8-2c1e-46e5-9752-3a1745f60716.html","relUrl":"notes\\a8d93cd8-2c1e-46e5-9752-3a1745f60716.html"},{"doc":"Week 1 - Foundamentals review & Compositions of Returns","title":"Week 1 - Foundamentals review & Compositions of Returns","hpath":"courses.investments.week1","content":"\n## Foundamentals review\r\n### Capital Asset Pricing Model (CAPM)\r\n\r\nExcess return of a stock is proportional to its beta \r\n ![](/assets/images/2020-12-19-14-39-00.png)\r\n\r\n \\\\( \\beta \\\\): covariance - systemtic risk - sensitivity to the market \r\n\r\n ![](/assets/images/2020-12-19-14-39-52.png)\r\n\r\n \r\n- \\\\( \\beta \\\\) = 1, stock moves with the market exactly\r\n- \\\\( \\beta \\\\) > 1, stock amplifies market\r\n- 0 < \\\\( \\beta \\\\) < 1, goes with market, but less so, e.g. Walmart \r\n\r\nStadard deviation (\\\\(\\sigma\\\\)): measure of total risk  \r\n\r\nCAPM: assets with higher \\\\( \\beta \\\\) should have higher benchmarks. Can't sipmly compare returns of assets. Prices and expected returns should reflect how sensitive it is to overall market \r\n\r\nAlpha (\\\\(\\alpha)\\\\): performance of an asset relative to its CAPM predicte return. \r\n\r\n ![](/assets/images/2020-12-19-14-51-28.png)\r\n\r\n\r\n ![](/assets/images/2020-12-19-15-53-59.png)\r\n\r\n asset 1 less beta than market but still same return - better \r\n\r\n ### 3-Factor model \r\n\r\nIn reality, \\\\( \\beta \\\\) generally does not predict returns as strongly as CAPM. Other factors that predict returns.\r\n\r\n- firm size\r\n    - small firm outperform large  \r\n- famous value premium\r\n    - \"value stock\" have historically outperformed (vs. \"growth stock\")\r\n    - high book/market ratio - value stock\r\n\r\naugmenting CAPM:\r\n\r\n### Market efficiency \r\n![](/assets/images/2020-12-19-16-22-11.png)\r\n\r\nInterpretation of market anomalies:\r\n- risk\r\n- irrational behavior \r\n- data mining - coincidentally fit the pattern \r\n\r\nEfficieint Market Hypothesis (EMH)\r\n- Semi-strong form EMH: stock prices reflect all publically available information \r\n\r\n### Regression \r\n![](/assets/images/2020-12-19-16-55-56.png)\r\n\r\n- p-value: prob. of finding the observed coefficient estimate under the null hypothesis\r\n    - common cutoff: 0.05 or smaller \r\n- statistical significance: 5% means p value is less than 0.05 \r\n- t-statistic: ratio of coefficient to the standard error of the coefficient \r\n    - common cutoff: 2 or more \r\n- (\\\\(r^2)\\\\)- goodness of fit. how much of variability of dependent variable is explained by independent variable ( 0= no relation  1= fit perfectly)\r\n\r\n\r\n## Compositions of Returns\r\n\r\n- Definition of return \r\n\r\n    \\\\( Return_t = { ( Price_t - Price_{t-1} + Dividend_t ) \\over Price_{t-1} }\\\\)\r\n- Dividend vs capital gain - theorically should be same, but practically taxed differently \r\n\r\n### Realization-based capital gains tax\r\n- realize loss within a year. so deduction is valued at regular income tax \r\n    - realize before 12/31 \r\n- realize gain after a year\r\n    - postpose after 12/31 so tax is delayed for next year\r\n- Tax delayed = tax saved \r\n    - example: if asset is 10% return, 20% cap gain tax, sell after 10 years -> equivalent annual tax rate = 14.3% \r\n    - ![](/assets/images/2020-12-20-11-08-34.png)\r\n- basis step-up at death \r\n    - when someone dies, potential cap gain liability dies with them \r\n\r\n### Seasonality in stock returns\r\n\r\n- \"_january effect_\" in return of **small stocks**\r\n    ![](/assets/images/2020-12-20-11-16-30.png)\r\n    - hypothesis: strong incentive to sell at end of year\r\n        - window-dressing by institutions - sell losing stock at end of the year to avoid reporting holding losing stocks \r\n        - tax loss by individuals  - tax deduction incentives\r\n            - effect is larger for stocks that have experienced lossees in hte prior year\r\n    - regression analysis against different tax rules over the years shows the effect tax loss by individuals have significant effect\r\n    - the effect declining over time \r\n        - may due to publicity\r\n    - assuming the effect persists:\r\n        - untaxed investors can buy in Dec \r\n","url":"https://angelarwang.com/dendron-notes/notes\\683498b7-eb79-4363-8ec7-bbbf909e9ba5.html","relUrl":"notes\\683498b7-eb79-4363-8ec7-bbbf909e9ba5.html"},{"doc":"GIS","title":"GIS","hpath":"courses.gis","content":"\n\r\n\r\nOther map related tools and tutorials:\r\n- [Command-Line Cartography  ](https://medium.com/@mbostock/command-line-cartography-part-1-897aa8f8ca2c) using d3-geo, TopoJSON and ndjson-cli to make thematic maps\r\n- [Leaflet JS](https://leafletjs.com/index.html) an open-source JavaScript library\r\nfor mobile-friendly interactive maps\r\n","url":"https://angelarwang.com/dendron-notes/notes\\8d510207-4138-4032-a284-28fa028e7c2b.html","relUrl":"notes\\8d510207-4138-4032-a284-28fa028e7c2b.html"},{"doc":"Foundamentals of GIS","title":"Foundamentals of GIS","hpath":"courses.gis.foundamental","content":"\n\r\nhttps://www.coursera.org/learn/gis \r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\361e2dd0-1ffb-4497-b812-18984976daf7.html","relUrl":"notes\\361e2dd0-1ffb-4497-b812-18984976daf7.html"},{"doc":"Week2 - ArcGIS Basics","title":"Week2 - ArcGIS Basics","hpath":"courses.gis.foundamental.week2","content":"\n\r\n## Using ArcMap for data exploration\r\n\r\n- right click '**Identify**' to look at attributes for one item\r\n- or multi select -> Right click on layer -> open attribute table, to see attributes of the multiple selection \r\n- Add a basemap for reference and change transparency (Layer Property -> Display) of the new layer to explore to overlay on top of basemap\r\n- Right click on layer -> Data -> item description to read metadata about the file\r\n- Layer property\r\n    - scale dependent rendering: don't show when scale > x \r\n    - Choose grouping and color ramp;\r\n        ![](/assets/images/2020-11-10-15-54-03.png)\r\n    - Definition query: \r\n        e.g. \"CumulativeArea.TotDASqKM > 5\" \r\n    - Labels - choose label field \r\n\r\n- Select by attribute:\r\n    - query:\r\n        - use \"Get Unique Values\" to help find value options for query \r\n        - string matching `GNIS_NAME LIKE '%Sacramento River'`\r\n    - layer -> zoom to selection \r\n- Calculate geometry\r\n    - to find sum of length of rivers named X: \r\n        select by atttribute ->  create a new column -> calculate geometry -> statistics on the column\r\n- Select by location \r\n    - after selecting some regions -> Select by location -> can find things in another layer that intersects/within/centroid lands in/ + add a radius... with the current selection \r\n- Export the selected data for future \r\n\r\n## Projections \r\n\r\n- Datum - fixed reference point for coordinates \r\n- Geographic coordinate systems\r\n- Projected coordinate system \r\n    - conformal - preserves local shape\r\n    - equal area - preserves area\r\n    - equidistant - preserve distances between points \r\n- common projections\r\n    - equirectagular: equal constant distance between parallels and meridians \r\n    - Mercator (conformal): angles preservation, good for navigation, standard for web, optimized for calculation speed\r\n    - Mollweide (equal area): relative area preserved but shape distorted \r\n    - Universal Transverse Mercator \r\n        ![](/assets/images/2020-11-10-17-23-26.png)\r\n\r\n## Geoprocessing\r\n\r\n- Geoprocessing tool box:\r\n    - Union: join two features (e.g. take NA map and SA map into a hemisphere map)\r\n- Environment variables\r\n    - change projections\r\n    - Processing extent: limit the area to do analysis\r\n- Spatial Join Tool\r\n    - ArcToolbox -> Analysis Tools -> Overlay -> Spatial Join\r\n    - JOIN_ONE_TO_ONE: use merge rule (e.g. join counties to watershed, but each watershed may go across multiple counties)\r\n        ![](/assets/images/2020-11-11-09-16-56.png)\r\n    - JOIN_ONE_TO_MANY: each watershet + county is a new row \r\n\r\n    - example uses: \r\n        - use it for summarizaiton \r\n        - which road cross a river \r\n        - join multiple layers (e.g. electoral district + water + utility )\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d9b98137-dd44-478a-a7d0-5831287cfdbc.html","relUrl":"notes\\d9b98137-dd44-478a-a7d0-5831287cfdbc.html"},{"doc":"Week1 - Intro","title":"Week1 - Intro","hpath":"courses.gis.foundamental.week1","content":"\n\r\n- Definition of GIS: software and data that enables to answer questions involving location and spatial info. Yelp, G maps, etc. all count\r\n- Desktop GIS - editting, processing, \r\n- Web GIS - mostly for displaying \r\n\r\n### terminology\r\n\r\nhttps://www.coursera.org/learn/gis/supplement/lMYp2/glossary-of-terms\r\n\r\n- **Vector** and feature **data**\r\n    - categorical and multivariate data \r\n        - e.g. each watershed has an **attribute table** \r\n    - Points, lines, polygons\r\n        - Lines: 1D, can have an attribute record\r\n        - Polygons: 2D, can have an attribute record\r\n- **Raster data** - continuous data \r\n    - grid of fixed-size pixels - uniform value within in pixel\r\n    - imagery (multiband raster data e.g. RGB) is raster data\r\n\r\n- map documents in ArcGIS \r\n    - stores representation of data, provide a workspace\r\n    - ext: .mxd\r\n    - the map data is not embeded. \r\n- Orthophoto: arieal photo after location corrected to the map\r\n- Watershed Analysis\r\n    - NHD – National Hydrography Dataset – A dataset that contains water bodies and streamlines for the United States\r\n        - Flowlines – the streamlines contained within NHD\r\n        - NHDPlus – an enhanced version of NHD that adds additional attributes for each streamline, such as contributing area, flow, elevation, WBD, etc. Often used in place of NHD.\r\n    - WBD – Watershed Boundary Dataset – a dataset containing nested watershed boundaries for the United States \r\n        - HUCs – Hydrologic Unit Codes – the watersheds created by the WBD   \r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\ae4197f7-ef66-4d95-8500-f54327559d1d.html","relUrl":"notes\\ae4197f7-ef66-4d95-8500-f54327559d1d.html"},{"doc":"Tools & Formats","title":"Tools & Formats","hpath":"courses.gis.foundamental.tools-and-formats","content":"\n\r\n### Software\r\n\r\n- ArcGIS \r\n    - heavyweight - the \"microsoft\"\r\n    - expensive, fast, stable\r\n    - industry standard, used by government, university, etc. \r\n- Quantum GIS \r\n    - newcomer \r\n    - easiest, free, open source GIS \r\n    - great complement to ArcGIS \r\n- Grass GIS\r\n    - old school\r\n    - cmd line based, GUI available \r\n    - free and open source \r\n- Others: Erdas Imagine, Mapinfo, Mapwindow, GvSig, Envi, Youdig, Saga, OpenJump. \r\n- some CAD software work with GIS data atoo \r\n- https://en.wikipedia.org/wiki/Comparison_of_geographic_information_systems_software\r\n\r\n- backup software: e.g. CrashPlan \r\n\r\n### Formats \r\n\r\n- Shapefile\r\n    - specific ESRI format\r\n    - standard format used by most \r\n    - comprised of 3-7 files\r\n    - rely on old dBase IV data tables \r\n    - slow, large, limiting, but useful for interchange\r\n\r\n- The [**GeoPackage open format**](https://www.geopackage.org/) is a SQLite container for GIS data (layers) in a single file. Unlike the ESRI Shapefile format, a single GeoPackage file can contain various data (both vector and raster) in different coordinate reference systems, as well as tables without spatial information\r\n- SpatiaLite database format, like GeoPackage, is also an extension of the SQLite library\r\n","url":"https://angelarwang.com/dendron-notes/notes\\4cb91877-d9b8-48e7-bf3f-c8e082c34701.html","relUrl":"notes\\4cb91877-d9b8-48e7-bf3f-c8e082c34701.html"},{"doc":"Resources","title":"Resources","hpath":"courses.gis.foundamental.resources","content":"\n\r\n## resources \r\n\r\n- [resources pdf](/assets/pdfs/gis-resources.pdf) (link only works locally)\r\n    - source:  https://www.coursera.org/learn/gis/supplement/UFDWI/resources-and-help-for-gis\r\n- https://gis.stackexchange.com/ \r\n- http://geonet.esri.com/ \r\n- reddit/askgis\r\n\r\n### Data \r\n\r\nData Finders\r\n- List of High Quality Datasets: https://github.com/nickrsan/awesome-public-datasets/\r\n- NRCS Geospatial Data Gateway: http://datagateway.nrcs.usda.gov/GDGOrder.aspx\r\n- List of worldwide GIS data sources from the US Geological Survey: http://education.usgs.gov/lessons/geospatialwebsites.html\r\n- An incredible list of data links from Humboldt State University: http://library.humboldt.edu/infoservices/staff/rls/geospatial/intgis.htm\r\n- National Map: http://viewer.nationalmap.gov/viewer/\r\n- American Factfinder (US Census data): http://factfinder2.census.gov\r\n- Book: The GIS Guide to Public Domain Data: https://spatialreserves.wordpress.com/about-thebook/\r\n\r\nDatasets\r\n- Enhanced National Hydrography Dataset (NHDPlus): http://www.horizon-systems.com/nhdplus/\r\n- GeoNames (GNIS): http://geonames.usgs.gov/domestic/download_data.htm\r\n- National Land Cover Dataset (NLCD): http://www.mrlc.gov/\r\n- TIGER (National lines and boundaries – Census):\r\nhttp://www.census.gov/geo/maps-data/data/tiger.html\r\n- USGS Water Data for the Nation: http://waterdata.usgs.gov/nwis\r\n- Listing of Global Terrain Data: http://vterrain.org/Elevation/global.html\r\n- World Terrain Data: http://www.naturalearthdata.com/\r\n- World Borders: http://thematicmapping.org/downloads/world_borders.php\r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\fcbd17a1-8969-4026-9319-128703eeb871.html","relUrl":"notes\\fcbd17a1-8969-4026-9319-128703eeb871.html"},{"doc":"Qgis","title":"Qgis","hpath":"courses.gis.foundamental.qgis","content":"\n\r\n# QGIS \r\n\r\n* Tutorial: https://docs.qgis.org/3.16/en/docs/training_manual/index.html \r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\4944904a-3fb3-4916-8a08-319e0de5d058.html","relUrl":"notes\\4944904a-3fb3-4916-8a08-319e0de5d058.html"},{"doc":"Accounting","title":"Accounting","hpath":"courses.accounting","content":"\n## Financial Accounting: Foundations\n\nhttps://www.coursera.org/learn/financial-accounting-basics/home/welcome \n\n\n### Module 1: financial statements\n- foundamental equation: asset = liability + shareholder's equity\n\n\n### Module 2: recording transactions\n\n- at end of quarter, consolidate income statement colum and move it to retained earnings \n    ![](/assets/images/2021-01-18-21-35-47.png)\n- ending balance row is used for **balance sheet**\n- use income statement column for **income statement**:  \n    ![](/assets/images/2021-01-18-21-45-09.png)\n","url":"https://angelarwang.com/dendron-notes/notes\\52e02f40-1ad0-46a7-9e4c-3ab9bf03eac1.html","relUrl":"notes\\52e02f40-1ad0-46a7-9e4c-3ab9bf03eac1.html"},{"doc":"Books","title":"Books","hpath":"books","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d088ab77-c2f6-4f7a-be4a-7597b00daff0.html","relUrl":"notes\\d088ab77-c2f6-4f7a-be4a-7597b00daff0.html"},{"doc":"Tech","title":"Tech","hpath":"books.tech","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\ede45f4d-8d30-42a9-bd27-f1b3ba37d6e0.html","relUrl":"notes\\ede45f4d-8d30-42a9-bd27-f1b3ba37d6e0.html"},{"doc":"Spring in Action","title":"Spring in Action","hpath":"books.tech.spring-in-action","content":"\n## Chpt 2: Wiring beans\n\nAuto configuration\n- `@Autowired` works on both constructor and method (will create dependent beans, and throw error if can't find)\n- `@Autowired` is spring specific, use `@Inject` from java, mostly interchangable \n- when using `@ComponentScan`, better to use `basePackageClasses` to be refactor proof\n\nManual wiring:\n- `@bean` by default ID = method name. override it with `name=`\n- by default, all beans in spring are singletons.\n  \n  ```\n  @Bean\n  public CompactDisc sgtPeppers(){\n    return new SgtPappers();\n  }\n  ```\n \n if directly call the method that a bean annotation is on, e.g. `sgtPepeprs()` will return the singleton rather than creating another instance. \n\n ## Chpt 3: Advanced wiring\n\n- `@Profile(\"dev\")` annotation for beans only created when active profiles include dev\n- `@Conditional(MagicExistsCondition.class)` for custom conditions \n  -  Condition interface comes with 2 params: `matches(ConditionContext context, AnnotatedTypeMetadata metadata)`\n  - [ConditionContext](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/ConditionContext.html)\n    - bean registry: bean definitions\n    - bean factory: presence of beans\n    - environment: env varialbes\n    - resource loader: resources loaded\n    - class loader: class loaded \n- disambiguating beans\n  - `@Primary`\n  - `@Qualifier(\"cold)`\n  - Use custom qualifier annotations to allow multiple qualifiers - `@Cold` \n    \n    ```\n    @Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE})\n    @Retention(RetentionPolicy.RUNTIME)\n    @Qualifier\n    public @interface Cold {\n    }\n    ```\n- `@Scope`\n  - singleton\n  - prototype - created each time is injected \n  - session - in web app, one for each session. e.g. shopping cart \n  - request \n    - scope proxy \n   \n    \n## Chpt4: Aspect oriented Spring\n\n- basic concepts:\n  ![](/assets/images/2021-08-31-20-04-25.png)\n- unlike AspectJ, spring is proxy based, and only supports **method interception**\n\n ![](/assets/images/2021-08-31-20-05-48.png)\n\n- wrap method options:\n  - `@After`\n  - `@AfterReturning`\n  - `@AfterThrowing`\t\n  - `@Around`\t\n  - `@Before`\t\n- also possible to add methods using **Introduction**\n\n  ![](/assets/images/2021-09-01-09-26-38.png)\n\n","url":"https://angelarwang.com/dendron-notes/notes\\KYZS7dUMRSIagJiwlZl1X.html","relUrl":"notes\\KYZS7dUMRSIagJiwlZl1X.html"},{"doc":"Spring Boot up and Running","title":"Spring Boot up and Running","hpath":"books.tech.spring-boot-up-and-running","content":"\n## Chap 1: in nutshell\n\n3 foundational features:\n\n1. starters for dependency management\n1. Executable JARs for Simplified Deployment\n    - instead of **shading** (combining dependency + app JARs into one), **nest JARs**\n    - can run the app \n        - simple `java -jar <SpringBootAppName.jar>`\n        - make the Jar self-executable\n1. convention over configuration\n    - autoconfig\n    - defaults favor local dev environment\n\n## Chap 2: Choosing Tools and Getting Started\n\n- Maven vs Gradle\n  - Maven:\n    - project structure strict convention\n      - rigic declarative -> consistency -> less issues\n  - Gradle:\n    - Incremental compilation, only compile changes\n    - allows scripting/programming\n    - flexibility -> more tweaking and troubleshooting\n- Java vs Kotlin\n  - Kotlin\n    - benefits:\n      - less verbose\n      - safe: by default no null values\n      - define own syntax with \"extension function\" and \"infix\" - more readable\n\n## Chap 3: REST API\n\n- use https://httpie.io/ to test REST APIs (over Curl, postman)\n- Use class-level @RequestMapping annotation for shared URL portion\n\n  ```java\n  @RestController\n  @RequestMapping(\"/coffees\")\n  class RestApiDemoController {\n  ```\n\n- Use ResponseEntity to include status codes.\n\n  ```java\n  @PutMapping(\"/{id}\")\n  ResponseEntity<Coffee> putCoffee(@PathVariable String id,\n          @RequestBody Coffee coffee) {\n      \n      ...\n      \n      return (coffeeIndex == -1) ?\n              new ResponseEntity<>(postCoffee(coffee), HttpStatus.CREATED) :\n              new ResponseEntity<>(coffee, HttpStatus.OK);\n  }\n  ```\n\n## Chap 4: DB access\n- `@entity` on model, no-arg constructor, setters on all fields\n- **Repository**\n  - `CrudRepository` with generic CRUD operations\n  - `JpaRepository` extends `CrudRepository` \n  \n## Chap 5: Config\n- `@ConfigurationProperties(prefix = \"greeting\")`\n- `@ConfigurationPropertiesScan` \n- need `spring-boot-configuration-processor` dependency\n- Autoconfiguration Report\n  - `java -jar bootapplication.jar --debug`\n  - `java -Ddebug=true -jar bootapplication.jar`\n  - `export DEBUG=true` in shell\n  - add `debug=true` to `application.properties` file\n- Actuator\n  - runtime info get/set\n  - need `spring-boot-starter-actuator` dependency\n  - secure by default with little info\n  - opening it up\n    - `management.endpoints.web.exposure.include`\n    - `management.endpoint.health.show-details=always`  or `when_authorized`\n  - query\n    - `/actuator/env` - get env variable and where config props comes from\n    - `/actuator/beans` - all beans created\n    - `actuator/health` - Health info (basic or expanded, depending on settings)\n    - `/actuator/loggers` \n      -  `echo '{\"configuredLevel\": \"TRACE\"}'  | http :8080/actuator/loggers/org.springframework.data.web` change logger level on the fly\n    - `/actuator/mappings`\n    - `/actuator/heapdump` and `/actuator/threaddump`\n    - `/actuator/metrics`","url":"https://angelarwang.com/dendron-notes/notes\\5c779a9e-83fe-48e9-a0bd-2e4bad5a04bf.html","relUrl":"notes\\5c779a9e-83fe-48e9-a0bd-2e4bad5a04bf.html"},{"doc":"Domain-driven Design Distilled","title":"Domain-driven Design Distilled","hpath":"books.tech.ddd-distilled","content":"\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\d33e7310-3439-469d-9ba7-67cbf94f529b.html","relUrl":"notes\\d33e7310-3439-469d-9ba7-67cbf94f529b.html"},{"doc":"Designing Data-intensive Applications","title":"Designing Data-intensive Applications","hpath":"books.tech.data-intensive-applications","content":"\n\r\n## Main takeaways \r\n\r\n- even ACID relational DBs does not provide the strong guarantees that we often assume  -[[weak isolation levels|books.tech.data-intensive-applications.ch7-transactions]]\r\n","url":"https://angelarwang.com/dendron-notes/notes\\a42eba1d-b978-4cdc-9160-1f3e9c7cf025.html","relUrl":"notes\\a42eba1d-b978-4cdc-9160-1f3e9c7cf025.html"},{"doc":"Ch08 - Problems with distributed systems","title":"Ch08 - Problems with distributed systems","hpath":"books.tech.data-intensive-applications.ch8-challenges","content":"\n\r\n- Supercomputing\r\n    - deals with partial failure by letting it escalate into total failure\r\n- Cloud computing\r\n    - Unreliable network \r\n        - telephone network is sync. call establish a _circuit_,  fixed, guaranteed amount of bandwidth is allocated for the call, along the entire route between the two callers. - has **bounded delay**\r\n        - Ethernet and IP are packet-switched protocols, which suffer from **queueing** and thus **unbounded delays** in the network. These protocols do not have the concept of a circuit <- because **optimized for bursty traffic**. audio or video call needs to transfer a fairly constant number of bps. TCP **dynamically adapts the rate of data transfer to the available network capacity**. \r\n        - **dynamic resource allocation**: has downside of queueing, but pro: it maximizes utilization of the wire. \r\n        - static resource partitioning: Latency guarantees. but reduced utilization. \r\n    - Unreliable Clocks\r\n        - possible to achieve good accuracy invest significant resources. e.g. the MiFID II draft EU regulation for financial institutions requires all HFT funds to synchronize to within 100 microseconds of UTC - uses GPS receivers, the Precision Time Protocol (PTP) careful deployment and monitoring\r\n        - typical NTP is fickle  - limited by the network round-trip time, in addition to quartz drift, etc.\r\n        - Clock readings have a confidence interval\r\n            - mostly not exposed, but Google’s TrueTime API in Spanner: when you ask it for the current time, you get back two values: [earliest, latest],\r\n        - Synchronized clocks for global snapshots \r\n            - typically require monotonically increasing transaction ID \r\n            - when distributed, Spanner approach: use the TrueTime API, if A\\[earliest] < A\\[latest] < B\\[earliest] < B\\[latest], then A is before B \r\n            - deliberately waits for the length of the confidence interval before committing a read-write transaction \r\n            - to keep uncertainty small, use GPS receiver or atomic clock in each datacenter\r\n        - problem with leader lease: \r\n            ```\r\n            get request\r\n            check lease expiration\r\n            if not expired, handle request\r\n            ```\r\n            - if rely on time-of-day expiry time, then out of sync \r\n            - what happens if process pause between check lease and handling of request? potential causes\r\n                - GC pause\r\n                - virtual machine suspended due to live migrations\r\n                - I/O blocking\r\n                -  context-switches \r\n","url":"https://angelarwang.com/dendron-notes/notes\\e9abdfa6-2451-442e-a681-5165daba5f36.html","relUrl":"notes\\e9abdfa6-2451-442e-a681-5165daba5f36.html"},{"doc":"Ch07 - Transactions","title":"Ch07 - Transactions","hpath":"books.tech.data-intensive-applications.ch7-transactions","content":"\n# Chapter 7: Transactions \r\n\r\nPurpose of transactions: simplify the programming model\r\n\r\n## ACID definition is slippery\r\n\r\n- Atomicity:\r\n    - different from normal meaning in concurrency programming (nobody else sees a partially updated state)\r\n    - means more _abortability_ - when  failure, all partial updates are reverted \r\n- Consistency: \r\n    - overloaded term\r\n    - means some _invariants_ to be true - but it's more up to application. \r\n    - 'C' doesn't really belong\r\n- Isolation:\r\n    - concurrently executing transactions are isolated from each other: they cannot step on each other’s toes\r\n    - i.e. _serializability_ - result is the same as if they had run serially\r\n    - in practice, **strictly serializable isolation is rarely used**. Oracle 11g doesn’t even implement it.\r\n- Durability\r\n    - once committed, data written is stored \r\n        - persisted to disk in single node\r\n        - or replicated in multi-node\r\n\r\n### single-object vs multi\r\n\r\n- Atomicity and isolation apply both to single and multi-object\r\n    - on single object:\r\n        - almost universally provided \r\n            - Atomicity - log for crash recovery \r\n            - isolation - a lock on each object \r\n        - some provide atomic operations e.g. increment or compare-and-et \r\n    - multi-object:\r\n        - in relational model, foreign key constraints to other table has to be met \r\n        - in document, need transactions to prevent denormalized data going out of sync \r\n        - update sconedary indexes \r\n- handling error\r\n    - ACID databases abandon transactino entirely if at risk of ACID\r\n    - quorum storage - \"best \"effort\" \r\n\r\n\r\n## Weak Isolation Levels \r\n\r\nSerializable isolation has a performance cost, and many databases - including **many popular relational DBs** don’t want to pay that price. \r\n\r\n### Read Committed\r\n- when reading, only see committed data - **no dirty reads**\r\n- when writing, only overwrite data that has been fully committed  - **no dirty writes**\r\n- very popular - deulat in Oracle 11g, PostgreSQL, SQL Server 2012 etc.\r\n- implementation\r\n    - prevent dirty writes by row level locks \r\n    - prevent dirty reads: not by read locks, but by **keeping the old commited value and the new value set by the transaction that currently holds the write lock**.\r\n\r\n### Snapshot Isolation and Repeatable Read\r\n\r\n- reads might see effect of part of the transaction \r\n- use case where it's important and useful: **long-running, read-only queries**\r\n    - backup \r\n    - Analytic queries and integrity checks\r\n- Snapshot Isolation: each transaction reads from a consistent snapshot of the database\r\n- Implementation\r\n    - prevent dirty writes by locks\r\n    - no read locks - instead, keep several different committed versions of an object - **multi-version concurrency control (MVCC)**.\r\n        - always-increasing transaction ID\r\n            ![](/assets/images/2020-11-11-22-47-29.png)\r\n        - when reading, only read the latest committed version of the row with write tx id < read tx id \r\n    - **Indexes** \r\n        - option 1: index simply point to all versions of an object, filter at read time\r\n        - option 2: (PostgreSQL) avoid index updates if diff version on the same page\r\n        - option 3: append-only B-trees - updates generate a new page. all parents up to root is copied and updated to new.  a particular root is a consistent snapshot of the database at the point in time when it was created. require background compaction and garbage collection. \r\n        \r\n- naming confusion\r\n    - different DB call it differently, and actual guarantees are different \r\n    - because SQL standard has flawed defintion for **repeatable read** - \r\n","url":"https://angelarwang.com/dendron-notes/notes\\603d252d-91ec-4f35-950e-26211cd5112a.html","relUrl":"notes\\603d252d-91ec-4f35-950e-26211cd5112a.html"},{"doc":"Ch06 - Partitioning","title":"Ch06 - Partitioning","hpath":"books.tech.data-intensive-applications.ch6-partitioning","content":"\n\r\n- Partitioned databases were pioneered in the 1980s by products such as Teradata, rediscvoered by noSQL\r\n\r\n## Partitioning by Key Range\r\n\r\n- used by BigTable, open source equivalent HBase, MongoDB before v2.4 \r\n- sorted in each partition: range scanes are easy \r\n- con: hot spots\r\n\r\n## partition by hash key \r\n- choice of hash key: \r\n    - Cassandra and MongoDB use MD5, Vodemort uses Fowler– Noll–Vo function.\r\n    - MurmurHash -  non-cryptographic but lightweight\r\n    - built-in Java hash function is bad, because same key -> different hash\r\n        - it's built for in memory hash tables and the behavior is [a safety mechanism to prevent collding hash attacks](http://martin.kleppmann.com/2012/06/18/java-hashcode-unsafe-for-distributed-systems.html)\r\n- Consistent Hashing\r\n    - great for caches\r\n    - does not work great for DBs \r\n- range query difficult - Cassandra and DynamoDB uses hash + sort ey \r\n- hotspot relief: application level  -  route writes to multiple keys: key_random_num\r\n\r\n## Secondary Indexes \r\n\r\n* local index - scatter writes, gather for eads \r\n    - Used by MongoDB, Riak, Cassandra, Elasticsearch, SolrCloud, and VoltDB \r\n* global index\r\n    - write reaches multiple partitions - distributed transaction or async update \r\n    \r\n## Rebalancing Partitions \r\n\r\n1. Fixed number of partitions\r\n    - more partitions than nodes\r\n    - when new node join, steal partitions from others \r\n    - Used in Riak,  Elasticsearch, Couchbase, and Voldemort \r\n    - hard to pick the right number of partitions \r\n    \r\n1. parition spliting and merging \r\n1. \\# of partition proportionally to nodes\r\n    - when a new node joins the cluster, it randomly chooses a fixed number of existing partitions to split, and then takes ownership of half of each partition\r\n    - used by Cassandra\r\n- auto vs manual rebalancing\r\n    - full automation can be dangerous in combination with automatic failure detection\r\n\r\n## Request Routing\r\n\r\n- require consensus\r\n    - use zookeeper - HBase, SolrCloud, Kafka, Espresso\r\n    - gossip - Cassandra and Riak\r\n    - no autobalancing, routing tier - couchbase \r\n    \r\n","url":"https://angelarwang.com/dendron-notes/notes\\c61cfa31-05a8-47de-897d-0fbd0a884e69.html","relUrl":"notes\\c61cfa31-05a8-47de-897d-0fbd0a884e69.html"},{"doc":"Ch05 - Replication","title":"Ch05 - Replication","hpath":"books.tech.data-intensive-applications.ch5-replication","content":"\n\r\nReasons for multi-machine:\r\n- scalability\r\n- HA\r\n- latency (route user closer to them)\r\n- Disconnected operation\r\n\r\nScaling\r\n- shared-memory  \r\n- shared-disk - e.g. Oracle RAC? \r\n- shared-nothing . i.e.  horizontal scaling \r\n\r\n## Leader-follower replication\r\n\r\n* Leader take writes, all can take reads \r\n* Used by: \r\n    - relational: PostgreSQL, MySQL, Oracle Data Guard, SQL Server AlwaysOn Availability Groups\r\n    - noSQL: MongoDB, RethinkDB, Espresso\r\n    - Kafka, RabbitMQ\r\n* Sync vs Async replication\r\n    - impractical for all followers to be synchronous\r\n    - if database is configured for sync, usually one of followers is sync, others are async - \"_semi-synchronous_\" \r\n* Implementation of Replication Logs\r\n    - Statement-based replication\r\n        - not generally used (MySQL before 5.1), because problems:\r\n            - nondeterministic functions e.g. NOW() or RAND()\r\n            - autoincrementing columns\r\n            - side effects (triggers, UDFs, etc)\r\n    - Write-ahead-log shipping\r\n        - WAG: in log structured storage engine, main palce for store. in Btree, WAL before B tree modified\r\n        - used in PostgreSQL and Oracle\r\n        - disadvantage: log very low level - specific disk block and bytes \r\n            -> problem: **zero-downtime upgrade not possible** if leader and follower can't run with different version of storage engine \r\n    - **Logical (row-based) log replication** \r\n        - decoupled from storage engine internals\r\n        - used by MySQL binlog\r\n        - also can be used by external system, CDC \r\n    - trigger-based - application layer\r\n        - Oracle GoldenGate or triggers and Stored Procs\r\n* Dealing with replication lag and eventual consistency\r\n    - Reading Your Own Writes \r\n        - option 1: When reading something that the user may have modified, read it from the leader; otherwise, read it from a follower. \r\n        - option 2: track time of last update, and query leader when within some time window\r\n        - option 3: client can remember timestamp and require serving replica up to date\r\n    - Monotonic Reads: second read lags behind first read \r\n        - option 1: read from same replica\r\n        - option 2: use sequencer? \r\n    - consistent prefix read: causual events observed out of order \r\n        - option 1: causal udpates in the same partition \r\n    - using transactions -  for a database to provide stronger guarantees so that the application can be simpler.              \r\n    \r\n## Multi-leader replication\r\n\r\n- use case:\r\n    - multi-datacenter\r\n    - Clients with offline operation\r\n        - offline device each has a local database that acts as leader\r\n    - Collaborative editing\r\n- conflict detection likely async - if sync, might as well use single leader\r\n- conflict avoidance\r\n    - different \"home\" cluster for diff users \r\n- achieving convergent conflict resolution \r\n    - each write unique ID, pick the highest ID \r\n    - assign priority between writers \r\n    - merge the values e.g. concat.\r\n    - record the conflict\r\n- custom conflict resolution logic \r\n    - on write\r\n    - on read\r\n- auto conflict resolution research:\r\n    - Conflict-free replicated datatypes (CRDTs) - family of data structures for sets, maps, ordered lists, counters, etc\r\n        - [CRDTs slide deck](https://speakerdeck.com/lenary/crdts-an-update-or-just-a-put)\r\n    - Mergeable persistent data structures - like Git, 3 way merge function\r\n        - [Mergeable Persistent Data Structures paper](http://gazagnaire.org/pub/FGM15.pdf)\r\n    - Operational transformation for collab. editing e.g. Google Docs. \r\n        - [papaer](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.53.933&rep=rep1&type=pdf)\r\n- Multi-Leader Replication Topologies\r\n    - all-to-all, circular, or star (generalize to trees)\r\n    - circular or star topology may be broken with one failed node\r\n    - all-to-all has problem of inconsistent ordering \r\n    \r\n## Leaderless Replication - quorum based \r\n\r\n* \"Dynamo-style\" - Riak, Cassandra, and Voldemort, inspired by Amazon Dynamo\r\n* catch-up options:\r\n    1. Read repair - reader can detect stale response and update\r\n    1. anti-entropy - background process\r\n* quorum condition: w + r > n  - b.c. set of nodes for w and r must overlap \r\n* issues with quorum: \r\n    - write partial failure needs to be rolled back\r\n    - eventual consistent without the type of replication lag gaurantees - hard to quantify\r\n    - difficult to mointor staleness\r\n* sloppy quorum:  writes and reads still require w and r successful responses, but those may include nodes that are not among the designated n “home” nodes for a value.\r\n    - once network inerruption is fixed, writes go back to \"home\" nodes - _hinted handoff_. so reads might not see the update. \r\n* Multi-datacenter: \r\n    - Cassandra and Voldemort extends quorum to multi-datacenter. high latency writes to other datacenters often async. \r\n    - Riak - all local. cross-dc happen async in the background \r\n* concurrent writes:\r\n    - the application developer neesd to understand the internals on this\r\n    - Last write wins based on a timestamp\r\n        - only option in Cassandra\r\n        - optionl on Riak \r\n        - only safe way: each key is immutable \r\n    - The “happens-before” relationship:\r\n        1. B depends on A -  “happens-before”\r\n        1. A and B are independent  - concurrent\r\n    - Option 1: Capturing the happens-before relationship (client send version number it depends on)\r\n        - server maintain version for each key \r\n        - when client writes, must include the version of a prev read and merge with it\r\n        - server can clean up versions <= version number received in the write - since it knows it has been merged. then incre curr version # and return it in response \r\n    - Option 2: Merging concurrently written values\r\n        - for collections, just union the writes\r\n        - deletes require a tombstones with a version number \r\n    - version vectors: multiple replicas, each need a version number \r\n        - collection of version numbers for all replicats \r\n        - [Dotted Version Vectors: Logical Clocks for Optimistic Replication paper](https://arxiv.org/pdf/1011.5808v1.pdf)\r\n\r\n## Summary\r\n-  Single-leader replication is popular because it is fairly easy to understand and there is no conflict resolution\r\n- Multi-leader and quorum based can be more robust in the presence of faulty nodes, network interruptions, and latency spikes—at the cost of being harder to reason about and providing only very weak consistency guarantees.\r\n\r\n## Reseach: Chain replication \r\n- [Chain Replication for Supporting High Throughput and Availability](https://static.usenix.org/events/osdi04/tech/full_papers/renesse/renesse.pdf) paper\r\n- [Object Storage on CRAQ\r\nHigh-throughput chain replication for read-mostly workloads](https://www.usenix.org/legacy/event/usenix09/tech/full_papers/terrace/terrace.pdf) paper \r\n- [Windows Azure Storage: A Highly Available\r\nCloud Storage Service with Strong Consistency](http://sigops.org/s/conferences/sosp/2011/current/2011-Cascais/printable/11-calder.pdf) paper\r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\28cfed31-0166-4784-a7d6-c76d3fcd269e.html","relUrl":"notes\\28cfed31-0166-4784-a7d6-c76d3fcd269e.html"},{"doc":"Ch04 - Encoding and evolution","title":"Ch04 - Encoding and evolution","hpath":"books.tech.data-intensive-applications.ch4-encoding","content":"\n\r\n# Chapter 4: Encoding and evolution \r\n\r\n* **Backward compatibility**: Newer code can read data that was written by older code.\r\n* **Forward compatibility**: Older code can read data that was written by newer code.\r\n\r\n## Formats of encoding\r\n### Lang specific format\r\n\r\n- Tied to a particular langaguage\r\n- Security concern - decoding process needs to be able to instantiate arbitrary classes \r\n- Versioning is after thought\r\n\r\n### JSON, XML, CSV\r\n\r\n- Usually good choice for comm between organizations\r\n- Problems:\r\n    - ambiguity around the encoding of numbers. \r\n        - e.g. large numbers - integers greater than 2^53 cannot be exactly represented  in floating point in javascript\r\n    - Lack support for binary string - base64 enciding as workaround. -- increase data size by 33%\r\n    - Schema support not widely used. Decoding logic needs hardcoding\r\n\r\n### Binary format\r\n\r\n- Benefits \r\n    - More compact (JSON etc. needs to be self describing. Lots of space used in each record)\r\n\t- The **schema is a valuable form of documentation**  \r\n\t- **Keeping a database of schemas** allows you to check forward and backward compatibility of schema changes, before anything is deployed. \r\n    - **Code gen for static typed languages**\r\n- **Apach Thrift** (originally Facebook) and **ProtoBuf** (ori. Google)\r\n    - example Protobuf schema\r\n        \r\n        ```\r\n\t\tmessage Person {\r\n            required string user_name       = 1;\r\n            optional int64  favorite_number = 2;\r\n            repeated string interests       = 3;\r\n\t\t} \r\n        ```\r\n    - Field tags and schema evolution \r\n        - Each field contain the tag number and value\r\n        - Tag number can't change\r\n        - Protobuf has no list type, but `repeated` flag - can evolve from single to repeated \r\n        - Thrift has dedicated list type => supports nested lists\r\n- **Avro** - designed for hadoop\r\n    - No reference to field tag\r\n    - Record appear in order\r\n    - **Translate between The writer’s schema and the reader’s schema**\r\n    - To maintain compatibility, you must only add or remove a field that has a **default value** \r\n    - how to find writer schema: different options \r\n        - Large file with lots of records  - include the writer’s schema once at the beginning of the large  file \r\n        - Version number + database to look up schema\r\n        - Negotiate version on connection setup - AVRO RPC \r\n    - Benefit: \r\n        - Support dynamically generated schemas  - e.g. no need to hardcode translation between DB columns and schema if doing a dump\r\n        - Code generation and dynamically typed languages - Thrift and Protocol Buffers rely on code generation, not great for dynamic lang. In Avro code gen is optional - for dynamic type, can read directly\r\n\r\n#### The Merits of Schemas \r\n\r\n- Many DBs proprietary binary encoding: JDBC/ODBC driver can decode responses from the DBs’s network protocol into in-memory data structures. \r\n- Thrift, Protobuf and Avro all support schema, but simpler than XML or json (e.g. regex constraints)\r\n\r\n## Modes of dataflow\r\n\r\n### Through Databases \r\n\r\n- Backward compatibility is clearly necessary: same client, newer version needs to read older writes\r\n- Forward compatibility is also needed: newer client writes a record, a older client reads\r\n- Common error: newer client adds a field, older client update the row, that unknown field get dropped-- if it can't parse new field, should keep as-is \r\n- Data outlives code: App updates fast. Data from a long time ago is still stored \r\n\t- Schema evolution thus allows the entire database to appear as if it was encoded with a single schema, even though the underlying storage may contain records encoded with various historical versions of the schema. \r\n- Archival storage:\r\n\t- data dump will typically be encoded using the latest schema \r\n\t- Avro object container often good fit - or parquet for analytic friendliness \r\n\r\n### Through Services: REST and RPC \r\n\r\n- REST is not a protocol, but rather a design philosophy that builds upon the principles of HTTP - \"REST-ful\"\r\n    - URL as resource\r\n    - HTTP features for cache control, authentication, and content type negotiation \r\n    - it doesn’t try to hide the fact that it’s a network protocol\r\n- SOAP: \r\n    - avoid HTTP specific features\r\n    - WSDL enables code generation so that a client can access a remote service using local classes and method calls  - not as useful for dynamically typed languages\r\n- problems with RPCs pretending to be local calls - is flawed idea: \r\n    - Unpredictable, may require retry\r\n    - may not know whether succeeded or failed (in case of timeout) \r\n    - Retry and idempotence - request may be going through but didn't get successful response\r\n    - Latency longer\r\n    - Passing data\r\n- REST is usually used for external comm, RPC may be internal\r\n- Evolution:\r\n    - can assume all the servers will be updated first, and all the clients second -> only need backward compatibility on requests, and forward compatibility on responses. \r\n\t- REST api provider can store client APIs + version they are requesting to help manage. E.g. [stripe](https://stripe.com/docs/upgrades)\r\n    - Thrift, gRPC (Protocol Buffers), and Avro RPC can be evolved according to the compatibility rules of the respective encoding format\r\n\r\n### Message-Passing Dataflow \r\n- **Actor programming model**: communicates by send/receiving async messages. process one message at a time. assume message may be lost \r\n- Compared to RPC, less mismatch between local vs remote communication \r\n- example distributed actor frameworks: message broker + actor programming model\r\n    * Akka - Java’s built-in serialization by default -> no fw/bw compatibility. supports using with ProtoBuf etc. to do rolling upgrades\r\n    * Orleans - also support custom serailization plug-ins \r\n    * Erlang OTP  \r\n","url":"https://angelarwang.com/dendron-notes/notes\\e22dd5a3-f940-4548-b1d7-22a26b5386ce.html","relUrl":"notes\\e22dd5a3-f940-4548-b1d7-22a26b5386ce.html"},{"doc":"Ch03 - Storage and Retrieval","title":"Ch03 - Storage and Retrieval","hpath":"books.tech.data-intensive-applications.ch3-DB-storage","content":"\n\r\n# Chapter 3: Storage and retrieval\r\n## Data structures that power your DB \r\n### Hash indexes \r\n- Use log for writing key + value; key + value\r\n- Index: Key -> byte offsets mapping \r\n- Used by - Bitcask - default storage engine for Riak - hashmap stored in memory \r\n- Good for: value of each key is updated frequently \r\n- Log compaction:\r\n    ![](/assets/images/2020-11-02-12-51-46.png)\r\n\r\n    - Segment log files\r\n    - Keep only the most recent update for each key \r\n    - Merging and compaction is written to a new file - in background \r\n    ![](/assets/images/2020-11-02-12-57-10.png)\r\n    - After compaction, switch to new merged segment \r\n- Lookup: each segment has its own hash table. First check most recent segment for key, then prior, …\r\n- File format: binary format is more space efficient and faster than CSVs\r\n- Deleting records: write tombstone record. During merge, discard prev entries\r\n- Crash recovery: If the database is restarted, the in-memory hash maps are lost. Snapshot segment hashmap on disk to speed up recovery\r\n- **Concurrency control: one writer thread. Because of immutability, reads can be concurrent** \r\n- Limitations:\r\n    - **Table must fit in memory**. Not good for large number of keys. Hashmap on disk bad perf: lots of random IO  \r\n    - **Range queries not efficient**\r\n\r\n\r\n### SSTables and LSM trees  \r\n- SSTables introduced by [Google bigtable paper](https://research.google/pubs/pub27898/)\r\n- Sorted String table\r\n    - each key only appears once within each merged segment \r\n    - Efficient merging\r\n        ![](/assets/images/2020-11-02-13-27-23.png)\r\n    - When write comes in - use in-memory balanced tree (i.e. memtable)\r\n    - After size too big: write to disk as SSTable file\r\n    - When read: first search in memtable, then in most recent on-disk segment, etc.\r\n    - Run merge and compaction in background \r\n    - Problem: crashes - most recent write is lost <-- keep a separate log for each write immediately on disk\r\n- Make LSM tree (log-structured merge-tree) out of SSTables \r\n    - keeping a cascade of SSTables that are merged in the background \r\n    - LSM storage engines: based on this principle of merging and compacting sorted files  \r\n    - Performance optimizations: bad perf if key does not exist -- use a bloom filter \r\n\r\n## B-tree \r\n- Compared to log structed indexes : MB sized segments; B tree breaks 4KB blocks/pages. corresponds more closely to the underlying hardware. \r\n        ![](/assets/images/2020-11-02-13-30-06.png)\r\n- Most databases can fit into a B-tree that is three or four levels \r\n- Grow a B tree by splitting a page\r\n- to make the database resilient to crashes: WAL - write-ahead log or redo log \r\n- Concurrency:  protect with latches \r\n- Optimizations:\r\n    - Use copy-on-write instead of WAL \r\n    - Abbreviating keys\r\n    - Try to keep leaf pages sequential - harder than LSM trees\r\n    - Additional pointers - such as sibling pages\r\n\r\n### Comparing B trees and LSM trees \r\n- LSM-trees are typically faster for writes, whereas B-trees are thought to be faster for reads  - however no conclusive benchmark\r\n- Pro of LSM trees:\r\n    - A B-tree index must write every piece of data at least twice & write an entire page at a time  - write amplication\r\n    - LSM-trees are typically able to sustain higher write throughput than B- trees, partly because they sometimes have lower write amplification \r\n    - LSM-trees can be compressed better - B-tree storage engines leave some disk space unused \r\n- Con of LSM\r\n    - compaction process can sometimes interfere with the performance of ongoing RWs - impact higher percentiles- \r\n    - If ill-configured, compaction cannot keep up with the rate of incoming writes - unmerged segments on disk keeps growing until you run out of disk space, and reads also slow down because they need to check more segment files \r\n    - B tree each key exists in exactly one place  - easier for locks & transaction semantics\r\n- B tree common in relational, LSM in newer DBs\r\n\r\n### Other strcutures  \r\n\r\n- Storing values within index:\r\n    - row is stored elsewhere (ie heapfile) \r\n    - clustered index -  row with index \r\n    - In MySQL innDB - primary key is clusterd, secondary index refer to the primary key \r\n    - Compromise: include some columns - covering index\r\n- Multi-column indexes \r\n    - Concatenated index\r\n    - Multi-dimensional index for spatial data \r\n        - Option 1: translate 2 dimensional location into a single number using a space filling curve\r\n        - Option 2: R trees with PostgreSQL’s Generalized Search Tree \r\n- Full-text search and fuzzy indexes \r\n- In memory DB:\r\n    - performance advantage of in-memory databases is not due to the fact that they don’t need to read from disk. \r\n    - But because they can avoid the overheads of encoding in-memory data structures in a form that can be written to disk \r\n    - Also offer data models difficult to implement with disk based indexes e.g. Redis \r\n    - Future: NVM (non-volatile memory)\r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\3722a8e7-0d0f-4460-b515-a66c21a18358.html","relUrl":"notes\\3722a8e7-0d0f-4460-b515-a66c21a18358.html"},{"doc":"Ch02 - Data Models and Query Languages","title":"Ch02 - Data Models and Query Languages","hpath":"books.tech.data-intensive-applications.ch2-data-models","content":"\n\r\n# Chapter 2 - data models and query languages \r\n\r\n## Relational vs document \r\nRoots of RDMS: business data processing - mainframe in the 1960s and ’70s. \r\n-  transaction processing (entering sales or banking transactions, airline reservations, stock-keeping in warehouses) \r\n- batch processing (customer invoicing, payroll, reporting )\r\n\r\n### Object-relational mismatch\r\n- For a data structure like a résumé, which is mostly a self-contained document, a JSON representation can be quite appropriate \r\n- Document: better locality \r\n- one-to-many relationships imply tree structure- captured well by JSON\r\n- Many-to one relationships - e.g. normalizing city of people \r\n    - not easy with doc data base \r\n    - Emulate join in application code rather than database\r\n- Many to many relationships\r\n- Not a new debate:\r\n    - Hierarchical model\r\n    - Network model\r\n\r\n#### RDMS vs document databases today\r\n- Document: schema flexibility, performance due to locality, sometimes closer to data structures used by application \r\n- Which data model leads to simpler application code? \r\n    - Document: If the data in your application has a document-like structure (i.e., a tree of one-to- many relationships, where typically the entire tree is loaded at once \r\n    - highly interconnected data : document is awkward, relational acceptable, graph most natural\r\n- Schema\r\n    - Document databases - schema-on-read - like dynamic type checking \r\n        -  advantageous if the items in the collection don’t all have the same structure for some reason \r\n    - Relational - schema-on-write. -  like static/compile time type checking\r\n        -  most relational database systems execute the ALTER TABLE statement in a few milliseconds except MySQL \r\n- Data locality for queries\r\n    - Document is usually stored as single continuous string. So if often eed access to entire doc, performance advantage\r\n    - Not limited to document db:\r\n        -   locality property in a relational model \r\n            - Spanner: rows nested in parent\r\n            - Oracle: multi-table index cluster table\r\n            - Bigtable, Cassandra and HBase : column family \r\n\r\n## Query languages\r\n- declarative query language: \r\n    - hides implementation details - Improve perf w/o requiring query changes \r\n    - lend themselves to parallel execution \r\n    - Example: css\r\n    - MapReduce query in MongoDB\r\n        -  Neither declarative nor fully imperative\r\n        -  Alternative: Mongo Aggregation pipeline: declarative - looks a lot like SQL \r\n        -  \"a NoSQL system may find itself accidentally reinventing SQL, albeit in disguise. \" \r\n## Graph data models\r\n- Great for many-to-many relationships \r\n- Can be emulated with recursive queries in Relational. But awkward\r\n- Type: \r\n    - Property graph - Neo4J\r\n    - Triple-store model\r\n        -  Resource Description Framework (RDF) - designed for semantic web - never took off \r\n        -  Subject - predicate - object \r\n        -  Predicate used for both property and edges\r\n            \r\n            ```\r\n            - prefix : \\<urn:example:\\>.\r\n                _:lucy     a       :Person.\r\n                _:lucy     :name   \"Lucy\".\r\n                _:lucy     :bornIn _:idaho\r\n            ```\r\n- Query language:\r\n    - Declarative:\r\n        -  SparQL - for triple stores using the RDF data model\r\n        -  Datalog - predicate(subject, object) - build rules small steps at a time \r\n        -  Cypher - neo4j \r\n    - Imperative: \r\n        -  Gremlin\r\n\r\n## Summary\r\n- Historically, data started out being represented as one big tree (the hierarchical model), but that wasn’t good for representing many-to-many relationships, so the relational model was invented to solve that problem \r\n- Recently noSQL:\r\n    - Document - when relationships across docs is rare\r\n    - Graph  - when anything is related to anything \r\n\t\t\r\n","url":"https://angelarwang.com/dendron-notes/notes\\45199987-a515-40d0-8bc8-c447503f21b1.html","relUrl":"notes\\45199987-a515-40d0-8bc8-c447503f21b1.html"},{"doc":"Ch10 - Batch processing","title":"Ch10 - Batch processing","hpath":"books.tech.data-intensive-applications.ch10-batch","content":"\n\r\n\r\n# The Unix Philosophy\r\n- Make each program do one thing well\r\n- output of every program to become the input to another unkonwn program\r\n- friendly to experimentation \r\n- Use tools in preference to unskilled help (prefer automation)\r\n\r\nexample: linux `sort` util: do one thing really well, but only powerful when combined with other tools\r\n\r\n- Batch Processing with Unix Tools\r\n    - **Chain of commands** versus custom program \r\n        - Sorting vs in-memory aggregation: example - count the most frequent URLs \r\n            - if large amount of data, sorting can make efficient use of disks \r\n                - Mergesort has sequential access patterns that perform well on disks\r\n            - small number of uniq values: in memory hash table may works great\r\n\r\n- **A uniform interface**\r\n    - interface is **file**: actual file, socket, stdin, stdout, device driver, etc. \r\n- Separation of logic and wiring\r\n    - defaulting to stdin and stdout allows loose coupling and program doesn’t know or care where input comes from or output going\r\n- Transparency and experimentation\r\n    - input immutable, can repeatly run\r\n    - can inspect intermediate results \r\n    - piping output to file allows checkpointing progress\r\n\r\n# MapReduce\r\n\r\nLots of parallel with Unix: \r\n- \r\n\r\n\r\n","url":"https://angelarwang.com/dendron-notes/notes\\b0ec61b7-70af-48f2-8c44-df56afab8f5d.html","relUrl":"notes\\b0ec61b7-70af-48f2-8c44-df56afab8f5d.html"},{"doc":"Science","title":"Science","hpath":"books.science","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\f76b5f30-47c6-4059-8760-10f2b19d1a7a.html","relUrl":"notes\\f76b5f30-47c6-4059-8760-10f2b19d1a7a.html"},{"doc":"Moonwalking with Einstein","title":"Moonwalking with Einstein","hpath":"books.science.moonwalking-with-Einstein","content":"\nRead: 2020/12\n\nMain takeaways:\n\n1. repetition itself does not cause improvement. need to attempt reptition at boundary of ability and consciously focus on the effort to fail less at each rep\n2. to make something rememberable is to create as much different connections to things already know - make the concept vivid with all senses: imagery, smell, sound. use mnemonics to make the mental image as jarring and unusual the better.\n","url":"https://angelarwang.com/dendron-notes/notes\\9fe3e331-a1f8-4055-8a61-ca4bdbfe0120.html","relUrl":"notes\\9fe3e331-a1f8-4055-8a61-ca4bdbfe0120.html"},{"doc":"Philosophy","title":"Philosophy","hpath":"books.philosophy","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\zF7oDWtNGZ0B1PJ68euy7.html","relUrl":"notes\\zF7oDWtNGZ0B1PJ68euy7.html"},{"doc":"Myth of Sisyphus","title":"Myth of Sisyphus","hpath":"books.philosophy.myth-of-sisyphus","content":"\n## An Absurd Reasoning\n### Absurdity and Suicide \n\n\"There is but one truly serious philosophical problem, and that is suicide\"\n- why? because the consequence of the conclusion > any other question\n- Real question is: **Does the Absurd dictate death？**\n\n### Absurd walls \n\nworld in itself is not absurd, what's absurd is the confrontation between man's urge towards unity and things that can't be reconcilled:\n- pure reason is full of paradoxes (e.g. Aristotle's about truths and falses)\n- Science behind what we see/touch: all just hypothesis, impossible to know for sure\n- in this age, lots of critism of rationalism. further proves the intensity of the hope of reconciliation and its futility \n\n### Philosophical suicide\n\n- absurd is result of comparison. magnitutde of absurdity proportional to distance of the two \n- other existential philosophers: escape \n  - Jaspers: the absurd itself is transcendence - it's a leap \n  - Chstov: god is the solution \n  - Kierkergaard: \n    - \"The important thing is not to be cured, but to live with one's ailments. Kierkergaard watns to be cured\".\n    - for K, dispair is sin, sin is waht alientates from god \n\n### Absurd freedom\n\n- Facts I cannot deny: the desire for unity, the longing to solve, the need for clarity and cohesion\n- The certainties: my appepite for the abolut and for unity and the impossiblity of reducing this world to a rational and reasonable principle \n- suicide: \n  - similar to philosohpical suicide, is escaping from the problem \n  - living is keeping the absurd alive. in that consciousneess and day-to-day revolt man give proof of his only truth - defiance \n- freedom \n  - before encountering absurd, everyday man lives with goals and concern for future\n  - but no true freedom exist if if it's not eternal \n  - if man imagine a purpose to his life, he becomes slave to the demands of the purpose - you are free to choose, but if you choose, you are no longer free \n  \n\nabsurd highlights my freedom of action \n","url":"https://angelarwang.com/dendron-notes/notes\\8sk6E4TV15OCUC131WWDk.html","relUrl":"notes\\8sk6E4TV15OCUC131WWDk.html"},{"doc":"Autobiographies","title":"Autobiographies","hpath":"books.autobiographies","content":"\n","url":"https://angelarwang.com/dendron-notes/notes\\q4JN59s3Az93r9d0FnTxg.html","relUrl":"notes\\q4JN59s3Az93r9d0FnTxg.html"},{"doc":"When Breathe Becomes Air","title":"When Breathe Becomes Air","hpath":"books.autobiographies.when-breathe-becomes-air","content":"\n\"Throughout college, my monastic, scholarly study of human meaning would conflict with my urge to forge and strengthn the human relationships that formed that meaning. **If the unexamined life was not worth living, was the unlived life worth examining?** \"\n\nWhitman ahd had no better luck than the rest of us at building a coherent \"physiological-spiritual\" vocabulary, but at least the ways in which he'd faied were illuminating.\n\nWords began to feel as weightless as the breath that carried them. Moral speculation was puny compared to moral action. \n\nAny neursurgical problem fores a patient and family to answer this question: What makes life meaningful enough to go on living? \n\nFrom his friend: \"There is a moment, a cusp, when the sum of gathered experience is worn down by the details of living\"\n\nThe way forward would seem obivous, if only I knew how many months or years I had left. Tell me three months, I'd spend time with family. Tell me one year, I'd write a book. Give me ten years, I'd get back to treating diseases. The truth that you live one day at a time didn't help： What was I supposed to do with that day? \n\nA physician's duety is not to stave off death or return patients to their old lives, but to take into our arms a patient and family whose lives have disintegrated and work until they can stand back up and face, and make sense of, their own existence. \n\nFrom the Englightenment onward, the individual occupied center stage. But now I lived in a different world, a more ancient one, where human action paled against superhuman forces, a wolrd that was more Greek tragedy than Shakespeare","url":"https://angelarwang.com/dendron-notes/notes\\qN2iz6RJkQuokiBmwLE7V.html","relUrl":"notes\\qN2iz6RJkQuokiBmwLE7V.html"},{"doc":"Changelog","title":"Changelog","hpath":"root.changelog","content":"","url":"https://angelarwang.com/dendron-notes/notes\\changelog.html","relUrl":"notes\\changelog.html"}]
